<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LAYA Architecture Studio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
      *, *::before, *::after {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      html {
          scroll-behavior: smooth;
      }
      body, html {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        color: #333;
        overflow-x: hidden;
        background-color: #000; /* Base background */
      }
      body {
          overflow-y: auto;
      }
      /* --- BASE STYLES --- */
      :root {
          --header-height: 75px;
          --accent-color-1: #C0A080; /* Soft Gold/Bronze */
          --accent-color-2: #5A5A5A; /* Medium Gray */
          --accent-color-3: #EAEAEA; /* Light Gray */
          --accent-color-4: #333333; /* Dark Gray / Near Black */
          --text-light: #f1f1f1;
          --text-dark: #2d2d2d;
          --bg-dark-1: #1a1a1a;
          --bg-dark-2: #252525;
          --bg-light-1: #fdfdfd;
          --bg-light-2: #ffffff;
          --header-icon-color-dark: var(--text-light);
          --header-icon-color-light: var(--text-dark);
          --header-hover-color: var(--accent-color-1);
          --header-bg-dark: rgba(26, 26, 26, 0.8); /* Dark semi-transparent */
          --header-bg-light: rgba(253, 253, 253, 0.85); /* Light semi-transparent */
          --logo-font: 'Montserrat', sans-serif;
      }
      /* --- HEADER STYLES --- */
      .site-header {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          width: 100%;
          height: var(--header-height);
          padding: 0 40px;
          z-index: 100;
          display: flex;
          align-items: center;
          background-color: var(--header-bg-dark);
          backdrop-filter: blur(12px);
          -webkit-backdrop-filter: blur(12px);
          transition: background-color 0.4s ease-out, backdrop-filter 0.4s ease-out;
      }
      body.on-light-section .site-header {
          background-color: var(--header-bg-light);
      }
      .header-logo {
          position: absolute;
          left: 50%;
          top: 50%;
          transform: translate(-50%, -50%);
      }
      .logo-link {
          text-decoration: none;
          display: inline-block;
      }
      .logo-link img {
          height: 50px;
          width: auto;
          display: block;
          transition: transform 0.3s ease;
      }
      .logo-link:hover img {
          transform: scale(1.08);
      }
      .header-nav {
          margin-left: auto;
      }
      .header-nav ul {
          list-style: none;
          display: flex;
          gap: 35px;
          padding: 0;
          margin: 0;
          align-items: center;
      }
      .header-nav li {
          position: relative;
      }
      .header-nav a {
          text-decoration: none;
          color: var(--header-icon-color-dark);
          font-size: 1.1rem;
          transition: transform 0.3s ease, color 0.3s ease;
          display: flex;
          flex-direction: column;
          align-items: center;
          position: relative;
      }
      body.on-light-section .header-nav a {
        color: var(--header-icon-color-light);
      }
      .header-nav a:hover {
          transform: scale(1.15);
          color: var(--header-hover-color);
      }
      .nav-label {
          position: absolute;
          top: 100%;
          margin-top: 6px;
          background-color: transparent;
          color: inherit; /* Inherits color from icon (light/dark) */
          font-family: var(--logo-font);
          font-weight: 500;
          font-size: 0.75rem;
          padding: 2px 4px;
          border-radius: 4px;
          white-space: nowrap;
          opacity: 0;
          visibility: hidden;
          transform: translateY(5px) scale(0.9);
          transition: opacity 0.3s ease, transform 0.3s ease, visibility 0s 0.3s;
          pointer-events: none;
          text-shadow: 0 0 3px rgba(0, 0, 0, 0.5); /* Subtle shadow for visibility */
      }
      .header-nav a:hover .nav-label {
          opacity: 1;
          visibility: visible;
          transform: translateY(0) scale(1);
          transition: opacity 0.3s ease, transform 0.3s ease, visibility 0s 0s;
      }

      /* --- FOOTER STYLES --- */
      section#section-4 { /* Apply positioning context to parent section */
        position: relative;
        background-color: var(--bg-light-1);
        color: var(--text-dark);
        min-height: 100vh;
        height: auto;
        padding-bottom: 20vh; /* Space for footer */
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden; /* Prevent form content from overflowing */
      }
      .site-footer {
          position: absolute; /* Position relative to section-4 */
          bottom: 30px;
          left: 0;
          width: 100%;
          padding: 0 30px; /* Added padding */
          display: flex;
          flex-direction: column; /* Stack items vertically */
          align-items: center;
          gap: 15px;
          z-index: 5; /* Ensure it's above potential section content */
          opacity: 0; /* Start hidden for animation */
          transform: translateY(30px); /* Start lower */
      }
      .site-footer .copyright {
          font-size: 0.85rem;
          color: #888;
          text-align: center;
          font-family: 'Poppins', sans-serif;
      }
      .site-footer .social-icons {
          display: flex;
          justify-content: center;
          gap: 20px;
      }
      .site-footer .social-icons a {
          text-decoration: none;
          color: #aaa; /* Lighter grey for icons */
          font-size: 1.2rem;
          transition: transform 0.3s ease, color 0.3s ease;
          display: inline-block; /* Needed for transform */
      }
      .site-footer .social-icons a:hover {
          transform: scale(1.15);
          color: var(--accent-color-2); /* Darker grey on hover */
      }

      /* --- SECTION STYLES --- */
      section {
          min-height: 100vh;
          height: auto; /* Allow content to define height if needed */
          width: 100%;
          display: flex; /* Use flexbox for centering content */
          justify-content: center;
          align-items: center;
          position: relative; /* For absolute positioning inside sections */
          overflow: hidden; /* Hide overflow */
          padding: 50px; /* Default padding */
          padding-top: var(--header-height); /* Add top padding equal to header height */
          margin-top: calc(-1 * var(--header-height)); /* Negative margin to pull section under header */
      }
      section:first-of-type { /* Hero has no top margin/padding */
          margin-top: 0;
          padding-top: 0;
      }

       /* --- SECTION 0: Hero Image Stack --- */
      .hero-section {
          background-color: var(--bg-dark-1);
          color: var(--text-light);
          display: block; /* Override flex for stack */
          padding: 0; /* Remove padding for full bleed */
          min-height: 100vh;
          height: 100vh; /* Fixed viewport height */
          position: relative;
          overflow: hidden;
      }

      /* --- HERO CONTENT (Positioning Only) --- */
      .hero-content {
        position: absolute;
        top: 65%; /* << POSITION LOWER */
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 2; /* Ensure content is above scrim */
        text-align: center;
        width: 90%;
        max-width: 800px; /* << WIDER MAX WIDTH */
        /* REMOVED: background, padding, border, shadow, blur */
        opacity: 1; /* Make sure container is visible for layout */
        pointer-events: none; /* Allow clicks through to background if needed */
       }
      .hero-content > * {
          pointer-events: auto; /* Allow interaction with text if needed */
      }

      /* --- HERO TAGLINE STYLING --- */
      .hero-tagline {
        /* << INCREASED FONT SIZE */
        font-size: clamp(2.2rem, 5vw, 3.5rem); /* Slightly larger base size */
        font-weight: 600; /* Slightly bolder */
        margin: 0 auto;
        line-height: 1.4; /* Adjust line height */
        font-family: 'Montserrat', sans-serif; /* Match logo font maybe? */
        color: var(--text-light);
        /* << UPDATED TEXT SHADOW FOR READABILITY */
        text-shadow: 0 2px 6px rgba(0, 0, 0, 0.75); /* Adjusted shadow */
        overflow: hidden;
       }

       /* --- TAGLINE WORD STYLES (for Pop Animation) --- */
       .tagline-word {
           display: inline-block; /* Needed for transform */
           opacity: 0; /* Initially hidden */
           transform: scale(0.5); /* Start scaled down */
           transform-origin: center center; /* Scale from center */
           margin: 0 4px; /* Space between words */
           will-change: transform, opacity; /* Performance hint */
       }

      .hero-image-stack {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          overflow: hidden;
      }

      /* --- SCRIM ADDED HERE --- */
      .hero-image-stack::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-color: rgba(0, 0, 0, 0.3); /* Dark overlay - adjust opacity (0.3 = 30%) */
          z-index: 1; /* Place scrim between image and content */
          pointer-events: none; /* Don't block interactions */
      }

      .hero-image {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          object-fit: cover;
          object-position: center;
          opacity: 0;
          pointer-events: none;
          z-index: 0; /* Ensure images are behind the scrim */
      }
      .hero-image.hero-image-active {
          opacity: 1;
          pointer-events: auto;
      }


      /* --- SECTION 1: About Me --- */
      .about-section {
          background-color: var(--bg-dark-2);
          color: var(--text-light);
      }
      .about-content-wrapper {
          max-width: 900px; /* Increased width slightly */
          opacity: 0; /* Start hidden */
          transform: translateY(50px); /* Start lower */
          /* Added Flexbox for layout */
          display: flex;
          justify-content: space-between;
          align-items: flex-start; /* Align text top, image center */
          width: 100%;
      }
      .about-text-container {
          flex: 1; /* Allow text to take available space */
          margin-right: 40px; /* Space between text and image */
          text-align: left; /* Align text left */
      }
      .about-title {
          font-family: var(--logo-font);
          font-size: clamp(2rem, 5vw, 3.5rem);
          font-weight: 700;
          margin-bottom: 30px;
          color: var(--accent-color-1);
      }
      .about-text {
           max-width: 700px; /* Limit text width */
      }
      .about-text p {
          font-size: clamp(0.9rem, 1.5vw, 1.1rem);
          line-height: 1.8;
          margin-bottom: 20px;
          font-weight: 300;
          font-family: 'Poppins', sans-serif;
      }
      .about-text strong {
          font-weight: 600;
          color: var(--accent-color-3); /* Lighter color for contrast */
      }
      .about-portrait {
          display: block; /* Ensure it behaves as a block element */
          max-width: 350px; /* Limit image size */
          height: auto;
          border-radius: 10px;
          border: 3px solid var(--accent-color-1);
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
          opacity: 0; /* Start hidden */
          transform: scale(0.8); /* Start smaller */
          flex-shrink: 0; /* Prevent image from shrinking */
      }


      /* --- NEW SECTION 2: Services (Replaces old .services-section) --- */
      .new-services-section {
          background-color: var(--bg-light-1); /* Base background */
          color: var(--text-dark);
          position: relative; /* For positioning children */
          display: flex; /* Keep centering */
          justify-content: center;
          align-items: center;
          /* Keep padding and margin adjustments */
          padding: 50px;
          padding-top: var(--header-height);
          margin-top: calc(-1 * var(--header-height));
          min-height: 100vh;
          overflow: hidden;
      }

      .services-background-image {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background-image: url('services.jpg'); /* <<< YOUR IMAGE PATH HERE */
          background-size: cover;
          background-position: center center;
          opacity: 0; /* Start hidden for dissolve */
          z-index: 1; /* Behind content */
          will-change: opacity; /* Performance hint */
      }

      .services-content-overlay {
          position: relative; /* Position within flex container */
          z-index: 2; /* Above background */
          max-width: 800px; /* Adjust max width */
          width: 90%;
          background-color: rgba(255, 255, 255, 0.8); /* Semi-transparent white overlay for readability */
          padding: clamp(30px, 5vw, 50px); /* Responsive padding */
          border-radius: 8px;
          box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1); /* Subtle shadow */
          text-align: center;
          opacity: 0; /* Start hidden for fade-in */
          transform: translateY(30px); /* Start slightly lower */
          will-change: transform, opacity;
      }

      .services-title-new { /* New class to avoid conflicts */
          font-family: var(--logo-font);
          font-size: clamp(1.8rem, 4vw, 3rem); /* Adjusted size */
          font-weight: 700;
          margin-bottom: 40px; /* Space below title */
          color: var(--accent-color-4);
          opacity: 0; /* Start hidden */
          transform: translateY(20px); /* Start lower */
          will-change: transform, opacity;
      }

      .services-list-new {
          margin-top: 30px; /* Space above the list */
          display: flex;
          flex-direction: column; /* Stack items vertically */
          gap: 25px; /* Space between service items */
          align-items: center; /* Center items within the overlay */
      }

      .service-item-new { /* New class */
          opacity: 0; /* Start hidden */
          transform: translateY(20px); /* Start lower */
          width: 100%; /* Take full width of overlay */
          max-width: 450px; /* Limit width for better reading */
          text-align: center; /* Center text within item */
          will-change: transform, opacity;
      }

      .service-icon-new { /* New class */
          font-size: 2.5rem; /* Slightly smaller icon */
          color: var(--accent-color-1);
          margin-bottom: 15px; /* Reduced space */
          display: inline-block;
      }

      .service-item-new h3 {
          font-family: 'Montserrat', sans-serif;
          font-size: 1.3rem; /* Slightly smaller heading */
          font-weight: 700;
          margin-bottom: 10px; /* Reduced space */
          color: var(--accent-color-4);
      }

      .service-item-new p {
          font-family: 'Poppins', sans-serif;
          font-size: 0.9rem; /* Slightly smaller text */
          line-height: 1.6;
          color: var(--accent-color-2);
          font-weight: 400;
      }
      /* --- END NEW SECTION 2 STYLES --- */


      /* --- SECTION 3: Portfolio Preview --- */
      .portfolio-section {
          background-color: var(--bg-dark-2);
          color: var(--text-light);
      }
      .portfolio-preview-container {
          display: flex;
          flex-direction: column;
          align-items: center;
          width: 100%;
          max-width: 1200px; /* Wide container */
          opacity: 0; /* Start hidden */
          transform: translateY(50px); /* Start lower */
      }
      .portfolio-title {
          font-family: var(--logo-font);
          font-size: clamp(2rem, 5vw, 3.5rem);
          font-weight: 700;
          margin-bottom: 50px;
          text-align: center;
          color: var(--accent-color-1);
      }
      .portfolio-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: 30px;
          width: 100%;
          margin-bottom: 50px;
      }
      .portfolio-item-placeholder {
          aspect-ratio: 4 / 3; /* Maintain aspect ratio */
          background: linear-gradient(135deg, var(--accent-color-2), var(--accent-color-4));
          border-radius: 8px;
          display: flex;
          justify-content: center;
          align-items: center;
          color: var(--text-light);
          font-family: 'Montserrat', sans-serif;
          font-size: 1.1rem;
          font-weight: 700;
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
          opacity: 0; /* Start hidden for stagger */
          transform: scale(0.9); /* Start smaller */
          transition: transform 0.3s ease, box-shadow 0.3s ease;
          padding: 15px; /* Padding inside placeholder */
          text-align: center;
      }
      .portfolio-item-placeholder:hover {
          transform: scale(1.03); /* Slight scale up on hover */
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      }
      .portfolio-cta {
          display: inline-block; /* Make it behave like a button */
          background-color: var(--accent-color-1);
          color: var(--text-dark); /* Dark text on gold */
          padding: 15px 40px;
          border-radius: 50px; /* Pill shape */
          font-family: 'Montserrat', sans-serif;
          font-weight: 700;
          text-decoration: none;
          font-size: 1rem;
          transition: background-color 0.3s ease, transform 0.3s ease, color 0.3s ease;
          opacity: 0; /* Start hidden */
          transform: translateY(20px); /* Start lower */
      }
      .portfolio-cta:hover {
          background-color: var(--accent-color-3); /* Light gray on hover */
          color: var(--text-dark); /* Ensure text is still dark */
          transform: translateY(0px) scale(1.05); /* Pop effect */
      }

      /* --- SECTION 4: Contact Form --- */
       .contact-section { /* This section already has the relative positioning for the footer */
            color: var(--text-dark);
       }
       .contact-form-container {
            background-color: var(--bg-light-2);
            padding: 50px clamp(20px, 8vw, 80px); /* Responsive padding */
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
            width: 100%;
            max-width: 700px;
            opacity: 0; /* Start hidden */
            transform: translateY(50px); /* Start lower */
            z-index: 1; /* Ensure form is above section bg, but below header/dots */
            color: var(--text-dark);
        }
        .contact-title {
            font-family: var(--logo-font);
            font-size: clamp(1.8rem, 4vw, 3rem); /* Slightly smaller */
            font-weight: 700;
            margin-bottom: 40px;
            text-align: center;
            color: var(--accent-color-4);
        }
        .contact-form .form-group {
            margin-bottom: 25px;
            position: relative; /* For potential future absolute elements inside */
        }
        .contact-form label {
            display: block;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--accent-color-2); /* Medium Gray */
            margin-bottom: 8px;
            opacity: 0; /* Start hidden for animation */
            transform: translateX(-20px); /* Start offset */
        }
        .contact-form input[type="text"],
        .contact-form input[type="email"],
        .contact-form textarea {
            width: 100%;
            padding: 15px 20px;
            border: 1px solid #ccc;
            border-radius: 6px;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            font-weight: 400;
            color: var(--text-dark);
            background-color: var(--bg-light-2); /* Ensure background matches container */
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            opacity: 0; /* Start hidden for animation */
            transform: translateX(-20px); /* Start offset */
        }
        .contact-form input[type="text"]:focus,
        .contact-form input[type="email"]:focus,
        .contact-form textarea:focus {
            border-color: var(--accent-color-1); /* Gold focus */
            box-shadow: 0 0 0 3px rgba(192, 160, 128, 0.3); /* Soft gold glow */
            outline: none;
        }
        .contact-form textarea {
            min-height: 150px;
            resize: vertical; /* Allow vertical resize */
        }
        .contact-form button {
            display: block; /* Take full width */
            width: 100%;
            padding: 15px 30px;
            background-color: var(--accent-color-4); /* Dark button */
            color: var(--text-light); /* Light text */
            border: none;
            border-radius: 50px; /* Pill shape */
            font-family: 'Montserrat', sans-serif;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease, color 0.3s ease;
            margin-top: 10px; /* Space above button */
            opacity: 0; /* Start hidden */
            transform: translateY(20px); /* Start lower */
        }
        .contact-form button:hover {
            background-color: var(--accent-color-1); /* Gold on hover */
            color: var(--text-dark); /* Dark text on hover */
            transform: scale(1.03) translateY(0); /* Slight pop effect */
        }

       /* --- Navigation Dots --- */
        .nav-dots {
            position: fixed;
            top: 50%;
            right: 30px;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            z-index: 101; /* Above header */
        }
        .nav-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.3); /* Base for dark sections */
            margin: 12px 0;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
            border: 1px solid rgba(0, 0, 0, 0.2); /* Slight border for definition */
        }
        body.on-light-section .nav-dot {
            background-color: rgba(0, 0, 0, 0.2); /* Base for light sections */
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .nav-dot.active {
            background-color: white; /* Active on dark sections */
            transform: scale(1.4);
            border: 1px solid rgba(0, 0, 0, 0.3);
        }
        body.on-light-section .nav-dot.active {
            background-color: var(--text-dark); /* Active on light sections */
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* --- Scroll Indicator (First Section) --- */
       .scroll-indicator {
            position: absolute;
            bottom: 10vh; /* Positioned higher */
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.8rem;
            font-family: 'Poppins', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 5;
            opacity: 0.8;
            transition: opacity 0.5s ease;
            letter-spacing: 1px;
            background-color: transparent; /* Ensure no background interferes */
        }
        .scroll-indicator span {
            font-weight: 400;
        }
        .scroll-indicator i {
            font-size: 1.2rem;
            margin-top: 8px;
            color: #fff;
        }

        @keyframes scrollArrow {
            0% { transform: translateY(0); opacity: 0.3; }
            50% { transform: translateY(8px); opacity: 1; }
            100% { transform: translateY(0); opacity: 0.3; }
        }

        .scroll-indicator i {
            animation: scrollArrow 2s infinite cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }

        body.scrolled .scroll-indicator {
            opacity: 0;
            pointer-events: none;
        }


      /* --- RESPONSIVE STYLES --- */
        @media (max-width: 992px) {
             .site-header { padding: 0 25px; }
             .logo-link img { height: 45px; }
             .header-nav ul { gap: 25px; }
             section { padding-left: 30px; padding-right: 30px; }
             section:first-of-type { padding-left: 0; padding-right: 0; padding-top: 0;} /* Keep hero full bleed */
             .portfolio-grid { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
             .contact-form-container { padding: 40px clamp(15px, 6vw, 60px); }
             /* .services-grid { gap: 30px; } */ /* Removed old services grid */
             .about-content-wrapper { flex-direction: column-reverse; align-items: center; } /* Stack about content */
             .about-text-container { margin-right: 0; margin-top: 30px; text-align: center; }
             .about-portrait { max-width: 250px; margin-bottom: 20px; }
             .scroll-indicator { bottom: 8vh; }
             .hero-content { top: 68%; max-width: 90%;} /* Adjust hero position/width */
             .hero-tagline { font-size: clamp(1.8rem, 4vw, 3rem); } /* Adjusted responsive hero font */
             .services-content-overlay { max-width: 90%; } /* Make overlay wider */
         }

         @media (max-width: 768px) {
              :root { --header-height: 70px; }
              .site-header { padding: 0 20px; }
              .logo-link img { height: 40px; }
              .header-nav ul { gap: 20px; }
              .header-nav a { font-size: 1rem; }
              .nav-label { display: none; } /* Hide labels on smaller screens */
              .nav-dots { right: 20px; }
              .nav-dot { width: 9px; height: 9px; margin: 10px 0; }
              section { padding-left: 20px; padding-right: 20px; }
               section:first-of-type { padding-left: 0; padding-right: 0; padding-top: 0;} /* Keep hero full bleed */
              .portfolio-grid { gap: 20px; }
              .portfolio-item-placeholder { font-size: 1rem; }
              .contact-form-container { padding: 30px clamp(10px, 4vw, 40px); }
              .contact-title { font-size: clamp(1.6rem, 5vw, 2.5rem); margin-bottom: 30px; }
              .contact-form input, .contact-form textarea { padding: 12px 15px; font-size: 0.95rem;}
              .contact-form button { padding: 12px 25px; font-size: 1rem; }
              .site-footer { bottom: 20px; }
              .site-footer .copyright { font-size: 0.75rem; }
              .site-footer .social-icons { gap: 15px; }
              .site-footer .social-icons a { font-size: 1.1rem; }
              .about-portrait { max-width: 200px; }
             /* .services-grid { grid-template-columns: 1fr; gap: 25px; } */ /* Removed old services grid */
             /* .services-title { margin-bottom: 40px; } */ /* Removed old services title */
             /* .service-item { padding: 30px; } */ /* Removed old service item */
             .hero-content { top: 70%; max-width: 90%; } /* Adjust hero position/width */
             .hero-tagline { font-size: clamp(1.6rem, 5vw, 2.5rem); line-height: 1.4; } /* Adjust tagline font */
             .services-title-new { font-size: clamp(1.6rem, 5vw, 2.5rem); } /* Adjust new services title */
             .service-item-new h3 { font-size: 1.1rem; }
             .service-item-new p { font-size: 0.85rem; }
             .service-icon-new { font-size: 2.2rem; }
         }

          @media (max-width: 480px) {
              :root { --header-height: 65px; }
              .site-header { padding: 0 15px; }
              .logo-link img { height: 35px; }
              .header-nav ul { gap: 15px; }
              .header-nav a { font-size: 0.9rem; }
              .nav-dots { right: 15px; }
              .hero-tagline { font-size: clamp(1.4rem, 6vw, 2rem); line-height: 1.4; } /* Adjust tagline font */
              .about-title { font-size: clamp(1.8rem, 6vw, 2.8rem); }
              .about-text p { font-size: clamp(0.85rem, 3.5vw, 1rem); line-height: 1.7; }
              .about-portrait { max-width: 150px; }
             /* .services-title { font-size: clamp(1.8rem, 6vw, 2.8rem); } */ /* Removed */
              .portfolio-title { font-size: clamp(1.8rem, 6vw, 2.8rem); }
              .portfolio-grid { grid-template-columns: 1fr; gap: 15px; }
              .portfolio-item-placeholder { font-size: 0.9rem; }
              .contact-title { font-size: clamp(1.5rem, 6vw, 2.2rem); }
              .scroll-indicator { bottom: 6vh; font-size: 0.75rem;}
              section { padding-left: 15px; padding-right: 15px; }
               section:first-of-type { padding-left: 0; padding-right: 0; padding-top: 0;} /* Keep hero full bleed */
               .contact-form-container { padding: 25px 15px; }
               .hero-content { top: 72%; max-width: 95%; } /* Adjust hero position/width */
               .tagline-word { margin: 0 2px;} /* Reduce space slightly */
               .services-content-overlay { padding: 25px; }
               .services-title-new { font-size: clamp(1.5rem, 6vw, 2.2rem); }
               .service-item-new h3 { font-size: 1rem; }
               .service-item-new p { font-size: 0.8rem; }
               .service-icon-new { font-size: 2rem; }
           }
    </style>
</head>
<body data-current-theme="dark"> <header class="site-header" id="site-header">
        <div class="header-logo">
            <a href="#section-0" class="logo-link" aria-label="LAYA Home">
                <img src="logo.png" alt="LAYA Architecture Studio Logo">
            </a>
        </div>
        <nav class="header-nav">
            <ul>
                <li><a href="#section-0" aria-label="Home"><i class="fas fa-home"></i><span class="nav-label">Home</span></a></li>
                <li><a href="#section-1" aria-label="About"><i class="fas fa-info-circle"></i><span class="nav-label">About</span></a></li>
                <li><a href="#section-services" aria-label="Services"><i class="fas fa-concierge-bell"></i><span class="nav-label">Services</span></a></li>
                <li><a href="#section-3" aria-label="Portfolio"><i class="fas fa-drafting-compass"></i><span class="nav-label">Portfolio</span></a></li>
                <li><a href="#section-4" aria-label="Contact"><i class="fas fa-envelope"></i><span class="nav-label">Contact</span></a></li>
            </ul>
        </nav>
    </header>

    <div class="nav-dots">
        <div class="nav-dot active" data-section="0"></div>
        <div class="nav-dot" data-section="1"></div>
        <div class="nav-dot" data-section="services"></div> <div class="nav-dot" data-section="3"></div>
        <div class="nav-dot" data-section="4"></div>
    </div>

    <section class="hero-section" id="section-0" data-theme="dark">
        <div class="hero-image-stack">
            <img src="interior_1.png" alt="Modern Interior Design 1" class="hero-image hero-image-active" id="hero-img-1">
            <img src="interior_2.png" alt="Classic Interior Design 2" class="hero-image" id="hero-img-2">
            <img src="interior_3.png" alt="Innovative Interior Design 3" class="hero-image" id="hero-img-3">
        </div>
         <div class="hero-content">
              <p class="hero-tagline">
                  <span class="tagline-word">Design</span>
                  <span class="tagline-word">that</span>
                  <span class="tagline-word">inspires</span>
              </p>
         </div>
        <div class="scroll-indicator">
             <span>Explore</span>
            <i class="fas fa-chevron-down"></i>
        </div>
    </section>

    <section class="about-section" id="section-1" data-theme="dark">
         <div class="about-content-wrapper">
              <div class="about-text-container">
                  <h2 class="about-title">Our Philosophy</h2>
                  <div class="about-text">
                      <p>At LAYA, we believe architecture is more than just buildings; it's about crafting experiences and shaping environments. Our approach is rooted in a deep respect for <strong>tradition and context</strong>, while constantly pushing the boundaries of <strong>design innovation</strong>.</p>
                      <p>We work closely with our clients, understanding their vision and needs to create spaces that are not only aesthetically stunning but also functional, sustainable, and enduring. From initial concept to final construction, <strong>collaboration and meticulous attention to detail</strong> are at the heart of everything we do.</p>
                      <p>Let us help you bring your vision to life.</p>
                  </div>
              </div>
              <img src="portrait.jpg" alt="Architect Portrait LAYA Studio" class="about-portrait">
         </div>
    </section>

    <section class="new-services-section" id="section-services" data-theme="light">
        <div class="services-background-image"></div>

        <div class="services-content-overlay">
            <h2 class="services-title-new">What We Offer</h2>
            <div class="services-list-new">
                <div class="service-item-new">
                    <i class="fas fa-pencil-ruler service-icon-new"></i>
                    <h3>Architectural Design</h3>
                    <p>Creating bespoke blueprints for residential, commercial, and public spaces that balance form and function.</p>
                </div>
                <div class="service-item-new">
                    <i class="fas fa-couch service-icon-new"></i>
                    <h3>Interior Spaces</h3>
                    <p>Designing thoughtful and elegant interiors that reflect your style and enhance daily living or working.</p>
                </div>
                <div class="service-item-new">
                    <i class="fas fa-lightbulb service-icon-new"></i>
                    <h3>Project Visioning</h3>
                    <p>Collaborating from the earliest stages to define project goals, feasibility, and conceptual direction.</p>
                </div>
            </div>
        </div>
    </section>
    <section class="portfolio-section" id="section-3" data-theme="dark">
        <div class="portfolio-preview-container">
            <h2 class="portfolio-title">Featured Work</h2>
            <div class="portfolio-grid">
                <div class="portfolio-item-placeholder">Project Alpha</div>
                <div class="portfolio-item-placeholder">Villa Beta</div>
                <div class="portfolio-item-placeholder">Urban Complex Gamma</div>
                <div class="portfolio-item-placeholder">Cultural Center Delta</div>
                <div class="portfolio-item-placeholder">Residence Epsilon</div>
                <div class="portfolio-item-placeholder">Commercial Hub Zeta</div>
            </div>
            <a href="#portfolio-full" class="portfolio-cta">Explore Full Portfolio</a>
            </div>
    </section>

    <section class="contact-section" id="section-4" data-theme="light">
         <div class="contact-form-container">
             <h2 class="contact-title">Get In Touch</h2>
             <form class="contact-form" action="#" method="POST">
                 <div class="form-group">
                     <label for="name">Name</label>
                     <input type="text" id="name" name="name" required placeholder="Your Full Name">
                 </div>
                 <div class="form-group">
                     <label for="email">Email</label>
                     <input type="email" id="email" name="email" required placeholder="your.email@example.com">
                 </div>
                 <div class="form-group">
                     <label for="subject">Subject</label>
                     <input type="text" id="subject" name="subject" placeholder="Briefly, what's this about?">
                 </div>
                 <div class="form-group">
                     <label for="message">Message</label>
                     <textarea id="message" name="message" required placeholder="Tell us more about your project or inquiry..."></textarea>
                 </div>
                 <button type="submit">Send Message</button>
             </form>
         </div>
        <footer class="site-footer">
            <div class="social-icons">
                <a href="#" aria-label="Instagram" title="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" aria-label="LinkedIn" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                <a href="#" aria-label="Pinterest" title="Pinterest"><i class="fab fa-pinterest"></i></a>
                <a href="#" aria-label="Behance" title="Behance"><i class="fab fa-behance"></i></a>
            </div>
            <p class="copyright">&copy; <span id="copyright-year"></span> LAYA Architecture Studio. All rights reserved.</p>
        </footer>
    </section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollToPlugin.min.js"></script>
    <script>
        gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);

        function initHero() {
            const heroSection = document.querySelector('.hero-section');
            if (!heroSection) return;
            const images = gsap.utils.toArray('.hero-image');
            const content = document.querySelector('.hero-content'); // Container (for positioning)
            const words = gsap.utils.toArray('.tagline-word', content); // Select the words

            let currentImageIndex = 0;
            let imageInterval;
            if (images.length === 0) { console.warn("No hero images found."); return; }

            gsap.set(images[0], { opacity: 1, pointerEvents: 'auto' });
            gsap.set(images.slice(1), { opacity: 0, pointerEvents: 'none' });
            // Ensure content container is visible for layout from start
            gsap.set(content, { opacity: 1 });
            // Initial state for words is set via CSS now (.tagline-word)

            // --- Timeline for Word Pop-Up Animation ---
            const wordTl = gsap.timeline({
                scrollTrigger: {
                    trigger: heroSection,
                    start: "top 65%", // Trigger animation a bit earlier as text is lower
                    toggleActions: "play none none reverse"
                },
                delay: 0.1 // Tiny delay
            });

            // Animate the words popping up sequentially
            if (words.length > 0) {
                wordTl.to(words, {
                    opacity: 1,
                    scale: 1,          // Scale up to normal size
                    duration: 0.7,     // Duration of each word pop
                    ease: 'back.out(1.5)', // Pop effect (adjust overshoot with number)
                    stagger: 0.1       // Time between start of each word pop (adjust timing)
                });
            } else {
                console.warn("No tagline words found for animation.");
            }
            // --- End of Pop-Up Animation Timeline ---


            function switchImage() {
                if (images.length <= 1) return;
                const nextImageIndex = (currentImageIndex + 1) % images.length;
                const tl = gsap.timeline({ defaults: { ease: "power1.inOut" } });
                tl.to(images[currentImageIndex], { opacity: 0, duration: 1.5 })
                  .set(images[currentImageIndex], { pointerEvents: 'none' })
                  .set(images[nextImageIndex], { opacity: 0 }, "<") // Start fade-in before fade-out finishes
                  .to(images[nextImageIndex], { opacity: 1, duration: 1.5 }, "<0.3") // Adjust overlap timing
                  .set(images[nextImageIndex], { pointerEvents: 'auto' });
                currentImageIndex = nextImageIndex;
            }
            function startImageTimer() {
                clearInterval(imageInterval);
                if (images.length > 1) { imageInterval = setInterval(switchImage, 5000); } // 5 second interval
            }
            startImageTimer();

            // Parallax for background images
            images.forEach(img => {
                gsap.to(img, { y: -30, ease: "none", scrollTrigger: { trigger: heroSection, start: "top top", end: "bottom top", scrub: 1.5 } });
            });
            // Parallax for the text block itself (content container)
            gsap.to(content, { yPercent: -15, ease: "none", scrollTrigger: { trigger: heroSection, start: "top top", end: "bottom top", scrub: 1 } }); // Slightly increased parallax on text
        }


        function initAbout() {
            const aboutSection = document.querySelector('.about-section');
            const aboutContentWrapper = document.querySelector('.about-content-wrapper');
            const aboutPortrait = document.querySelector('.about-portrait');

            if (!aboutSection || !aboutContentWrapper || !aboutPortrait) {
                console.warn("About elements missing.");
                return;
            }

            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: aboutSection,
                    start: "top 70%", // Trigger when 70% from top enters viewport
                    toggleActions: "play none none reverse" // Play on enter, reverse on scroll back up
                }
            });

            tl.to(aboutContentWrapper, { opacity: 1, y: 0, duration: 1, ease: 'power3.out' })
              .to(aboutPortrait, { opacity: 1, scale: 1, duration: 0.8, ease: 'back.out(1.7)' }, "-=0.6"); // Animate portrait slightly after/overlapping wrapper
        }

        // NEW Init function for the redesigned services section
        function initNewServices() {
            const servicesSection = document.querySelector('.new-services-section');
            const bgImage = document.querySelector('.services-background-image');
            const contentOverlay = document.querySelector('.services-content-overlay');
            const title = document.querySelector('.services-title-new');
            const items = gsap.utils.toArray('.service-item-new');

            if (!servicesSection || !bgImage || !contentOverlay || !title || items.length === 0) {
                console.warn("New Services elements missing.");
                return;
            }

            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: servicesSection,
                    start: "top 75%", // Adjust trigger point as needed
                    toggleActions: "play none none reverse"
                }
            });

            // 1. Dissolve in the background image
            tl.to(bgImage, {
                opacity: 1,
                duration: 1.5, // Slow dissolve
                ease: 'none'
            });

             // 2. Fade in the content overlay container (subtly)
            tl.to(contentOverlay, {
                opacity: 1,
                y: 0, // Move from translateY(30px) to 0
                duration: 0.8,
                ease: 'power2.out'
            }, "-=1.0"); // Start this slightly before image fully faded in

            // 3. Fade in the title
            tl.to(title, {
                opacity: 1,
                y: 0, // Move from translateY(20px) to 0
                duration: 0.6,
                ease: 'power2.out'
            }, "-=0.5"); // Start title fade after overlay starts

            // 4. Fade in service items one by one
            tl.to(items, {
                opacity: 1,
                y: 0, // Move from translateY(20px) to 0
                duration: 0.7,
                ease: 'power2.out',
                stagger: 0.25 // Time between each item animation start
            }, "-=0.3"); // Start items slightly after title starts
        }


        function initPortfolio() {
            const portfolioSection = document.querySelector('.portfolio-section');
            const container = document.querySelector('.portfolio-preview-container');

            if (!portfolioSection || !container) {
                console.warn("Portfolio elements missing.");
                return;
            }
            const items = gsap.utils.toArray('.portfolio-item-placeholder', container);
            const cta = document.querySelector('.portfolio-cta', container);

            if (!items.length || !cta) {
                 console.warn("Portfolio items/CTA missing.");
                 return;
            }

            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: portfolioSection,
                    start: "top 65%", // Trigger animation slightly earlier
                    toggleActions: "play none none reverse"
                }
            });

            tl.to(container, { opacity: 1, y: 0, duration: 0.5, ease: 'power2.out' }) // Fade in container first
              .to(items, {
                    opacity: 1,
                    scale: 1,
                    duration: 0.6,
                    ease: 'back.out(1.4)', // Pop effect
                    stagger: 0.15 // Stagger items
               }, "-=0.3") // Start items slightly after container
              .to(cta, {
                    opacity: 1,
                    y: 0,
                    duration: 0.7,
                    ease: 'power2.out' // Smooth fade up
                }, "-=0.5"); // Start CTA during item animation
        }

        function initContact() {
            const contactSection = document.querySelector('.contact-section');
            const container = document.querySelector('.contact-form-container');

            if (!contactSection || !container) {
                console.warn("Contact elements missing.");
                return;
            }
            const labels = gsap.utils.toArray('.contact-form label', container);
            const inputs = gsap.utils.toArray('.contact-form input, .contact-form textarea', container);
            const button = container.querySelector('.contact-form button');

            if (!labels.length || !inputs.length || !button) {
                console.warn("Contact form elements missing.");
                return;
            }

            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: contactSection,
                    start: "top 60%", // Trigger point
                    toggleActions: "play none none reverse"
                }
            });

            // Animate container fade-in and slide-up
            tl.to(container, { opacity: 1, y: 0, duration: 0.8, ease: 'power3.out' });

            // Staggered animation for labels and inputs
            tl.to(labels, {
                opacity: 1,
                x: 0, // Slide in from left
                duration: 0.5,
                ease: 'power2.out',
                stagger: 0.1 // Stagger labels
             }, "-=0.5"); // Start slightly after container

            tl.to(inputs, {
                opacity: 1,
                x: 0, // Slide in from left
                duration: 0.5,
                ease: 'power2.out',
                stagger: 0.1 // Stagger inputs, slightly after labels
             }, "<0.1"); // Start just after labels start

            // Animate button fade-in and pop-up
            tl.to(button, {
                opacity: 1,
                y: 0, // Slide up
                duration: 0.6,
                ease: 'back.out(1.7)' // Pop effect
             }, "-=0.3"); // Start during input animations
        }

        function initHeader() {
            const header = document.getElementById('site-header');
            if (!header) {
                console.warn("Site header not found.");
                return;
            }
            const headerLinks = document.querySelectorAll('.header-nav a[href^="#"]');

            headerLinks.forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    // Basic check for valid hash links
                    if (href && href.startsWith('#') && href.length > 1) {
                         try {
                            const target = document.querySelector(href);
                            if (target) {
                                e.preventDefault();
                                const headerHeight = header.offsetHeight;
                                // Use GSAP ScrollTo plugin for smooth scroll
                                gsap.to(window, {
                                    duration: 1.2,
                                    scrollTo: {
                                        y: target,
                                        offsetY: (target.id === 'section-0' ? 0 : headerHeight) // No offset for hero
                                    },
                                    ease: "power2.inOut"
                                });
                            } else {
                                console.warn(`Scroll target '${href}' not found.`);
                            }
                        } catch (error) {
                            console.error(`Error selecting scroll target '${href}':`, error);
                        }
                    }
                });
            });

            // Smooth scroll for Logo link to top
            const logoLink = document.querySelector('.logo-link');
             if (logoLink) {
                logoLink.addEventListener('click', function (e) {
                     const href = this.getAttribute('href');
                     if (href === '#section-0') {
                         e.preventDefault();
                          const target = document.getElementById('section-0');
                           if(target){
                               gsap.to(window, { duration: 1.2, scrollTo: { y: target }, ease: "power2.inOut" });
                           }
                     }
                });
             }
        }

        function initFooter() {
            const footer = document.querySelector('#section-4 .site-footer'); // Target footer within section-4
            const copyrightYearSpan = document.getElementById('copyright-year');

            if (!footer) {
                console.warn("Site footer missing.");
                return;
            }
            if(copyrightYearSpan) {
                copyrightYearSpan.textContent = new Date().getFullYear();
            } else {
                console.warn("Copyright year span missing.");
            }

            // Animate footer visibility when near the bottom of section-4
            gsap.to(footer, {
                opacity: 1,
                y: 0, // Move from translateY(30px) to 0
                duration: 1.0,
                ease: 'power2.out',
                scrollTrigger: {
                    trigger: '#section-4', // Trigger based on the contact section
                    start: "center bottom-=10%", // Start when center of section-4 is 10% from bottom of viewport
                    toggleActions: "play none none reverse", // Play on enter, reverse on leave back
                    id: "footer-reveal" // Optional ID for debugging
                }
            });
        }


        function initNavigation() {
            const sectionsNodeList = document.querySelectorAll('section[id^="section-"]'); // Select all sections with IDs starting "section-"
            const sections = Array.from(sectionsNodeList);
            const navDots = document.querySelectorAll('.nav-dot');
            const body = document.body;
            const header = document.getElementById('site-header');

            if (navDots.length === 0 || sections.length === 0 || !header) {
                console.warn("Navigation elements missing (dots, sections, or header).");
                return;
            }

            // Verify dot/section correspondence based on data-section/id
            if (navDots.length !== sections.length) {
                 console.warn(`Dot/Section mismatch: ${navDots.length} dots, ${sections.length} sections. Navigation might be inaccurate.`);
            }

            const getHeaderHeight = () => header.offsetHeight; // Function to get current header height

            // Dot click handling
            navDots.forEach(dot => {
                dot.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionIdSuffix = dot.getAttribute('data-section');
                    const targetSection = document.getElementById(`section-${sectionIdSuffix}`);

                    if (targetSection) {
                        gsap.to(window, {
                            duration: 1.2,
                            scrollTo: {
                                y: targetSection,
                                offsetY: (targetSection.id === 'section-0' ? 0 : getHeaderHeight()) // No offset for hero
                            },
                            ease: "power2.inOut"
                        });
                    } else {
                        console.error(`Target section #section-${sectionIdSuffix} not found for dot click.`);
                    }
                });
            });

            // ScrollTrigger for updating active dot and body theme
            sections.forEach((section) => {
                const sectionIdSuffix = section.id.replace('section-', ''); // e.g., '0', '1', 'services', '3', '4'
                const theme = section.getAttribute('data-theme') || 'dark'; // Default to dark if not specified

                 ScrollTrigger.create({
                    trigger: section,
                    // Adjust start based on header height, except for the hero section
                    start: () => section.id === 'section-0' ? `top top` : `top top+=${getHeaderHeight()}px`,
                    // End trigger needs to be reliable, use bottom for last section
                    end: () => {
                         const isLastSection = section === sections[sections.length - 1];
                         return isLastSection ? "bottom bottom" : `bottom top+=${getHeaderHeight()}px`;
                     },
                    id: `section-nav-${sectionIdSuffix}`, // Unique ID for debugging
                    onEnter: () => updateActiveState(sectionIdSuffix, theme),
                    onEnterBack: () => updateActiveState(sectionIdSuffix, theme),
                     invalidateOnRefresh: true // Recalculate triggers on resize/refresh
                });
            });

            // Function to update active dot and body class
            function updateActiveState(activeSectionIdSuffix, activeTheme) {
                // Update dots
                navDots.forEach((dot) => {
                    dot.classList.toggle('active', dot.getAttribute('data-section') === activeSectionIdSuffix);
                });

                // Update body theme class
                const currentBodyTheme = body.classList.contains('on-light-section') ? 'light' : 'dark';
                if (activeTheme !== currentBodyTheme) {
                    body.classList.toggle('on-light-section', activeTheme === 'light');
                }
             }


             // --- Scroll Indicator Visibility ---
            let scrollIndicatorState = { scrolled: window.scrollY > 50 }; // Initial check
            body.classList.toggle('scrolled', scrollIndicatorState.scrolled);

            const scrollListener = () => {
                const isScrolled = window.scrollY > 50; // Check if scrolled past 50px
                if (isScrolled !== scrollIndicatorState.scrolled) {
                    body.classList.toggle('scrolled', isScrolled);
                    scrollIndicatorState.scrolled = isScrolled;
                }
            };
            window.addEventListener('scroll', scrollListener, { passive: true }); // Use passive listener

             // Initial state check after slight delay for layout settling
             setTimeout(() => {
                 let initialSectionIdSuffix = '0'; // Default to first section
                 let initialTheme = 'dark'; // Default theme
                 const currentScrollY = window.scrollY;
                 const currentHeaderHeight = getHeaderHeight();
                 const threshold = currentHeaderHeight / 2; // Point below header to determine active section

                 // Determine the currently visible section based on scroll position
                 for (let i = sections.length - 1; i >= 0; i--) {
                     const section = sections[i];
                     const rect = section.getBoundingClientRect();
                     const sectionTopScrollY = currentScrollY + rect.top;

                     // Check if the top of the section is above the threshold point
                     if (sectionTopScrollY <= currentScrollY + threshold) {
                         initialSectionIdSuffix = section.id.replace('section-', '');
                         initialTheme = section.getAttribute('data-theme') || 'dark';
                         break; // Found the active section
                     }
                 }

                 updateActiveState(initialSectionIdSuffix, initialTheme);
                 // Re-check scroll indicator state
                 scrollIndicatorState.scrolled = window.scrollY > 50;
                 body.classList.toggle('scrolled', scrollIndicatorState.scrolled);
                 ScrollTrigger.refresh(); // Refresh ScrollTrigger after setting initial state
             }, 150); // Delay to ensure layout is stable
        }

        // --- Main Initialization Function ---
        function initAll() {
            console.log("Initializing LAYA animations...");
            // Call initialization functions in order
            initHeader();     // Setup header links first
            initNavigation(); // Setup scroll triggers and dots
            initFooter();     // Setup footer animation
            initHero();       // Animate Hero section elements
            initAbout();      // Animate About section elements
            initNewServices(); // Animate NEW Services section elements <<<<< MODIFIED HERE
            initPortfolio();  // Animate Portfolio section elements
            initContact();    // Animate Contact section elements

            // Generic smooth scroll for other anchors (e.g., portfolio CTA if it pointed to an ID)
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                // Exclude header and nav dots links as they have specific handlers
                if (!anchor.closest('.site-header') && !anchor.closest('.nav-dots')) {
                    anchor.addEventListener('click', function (e) {
                        const href = this.getAttribute('href');

                        // Specific handling for portfolio CTA or similar links
                        if (href === '#portfolio-full') {
                            e.preventDefault();
                            // Add logic here if you want it to scroll somewhere specific,
                            // or maybe open a modal, or navigate to a different page.
                            console.log("Portfolio CTA clicked - Implement desired action.");
                            return; // Stop further processing for this link
                        }

                        // General smooth scroll for other internal links
                        if (href && href.startsWith('#') && href.length > 1) {
                            try {
                                const target = document.querySelector(href);
                                const header = document.getElementById('site-header');
                                const offset = header ? header.offsetHeight : 75; // Default offset

                                if (target) {
                                    e.preventDefault();
                                    gsap.to(window, { duration: 1, scrollTo: { y: target, offsetY: offset }, ease: "power2.inOut" });
                                } else {
                                    console.warn("Smooth scroll target not found:", href);
                                }
                            } catch (error) {
                                // Catch potential errors from invalid selectors
                                console.warn("Could not find target for anchor:", href, error);
                            }
                        } else if (href === "#") {
                             e.preventDefault(); // Prevent jumping for href="#" links
                        }
                    });
                }
            });

            // Final refresh after a slightly longer delay, ensure everything is rendered and calculated
            setTimeout(() => {
                 ScrollTrigger.refresh();
                 console.log("ScrollTrigger refreshed after init.");
            }, 250);

            // Refresh ScrollTrigger on resize (debounced)
            let resizeTimer;
            window.addEventListener('resize', () => {
                 clearTimeout(resizeTimer);
                 resizeTimer = setTimeout(() => {
                    console.log("Resizing - Refreshing ScrollTrigger...");
                    ScrollTrigger.refresh(true); // Use true to invalidate labels/positions
                }, 250); // Debounce resize events
            });

            console.log("LAYA Initialization sequence complete.");
        }

        // Run initialization when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initAll);
        } else {
            // DOMContentLoaded has already fired
            initAll();
        }
    </script>
</body>
</html>
