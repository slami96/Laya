<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LAYA Architecture Studio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
      *, *::before, *::after {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      html {
        /* scroll-behavior: smooth; */ /* Handled by JS */
      }
      body, html {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        color: #333;
        overflow-x: hidden;
        background-color: #000; /* Base background */
      }
      body {
          overflow-y: auto;
      }
      /* --- BASE STYLES --- */
      :root {
          --header-height: 75px;
          --accent-color-1: #C0A080; /* Soft Gold/Bronze */
          --accent-color-2: #5A5A5A; /* Medium Gray */
          --accent-color-3: #EAEAEA; /* Light Gray */
          --accent-color-4: #333333; /* Dark Gray / Near Black */
          --text-light: #f1f1f1;
          --text-dark: #2d2d2d;
          --bg-dark-1: #1a1a1a;
          --bg-dark-2: #252525;
          --bg-light-1: #fdfdfd;
          --bg-light-2: #ffffff;
          --header-icon-color-dark: var(--text-light);
          --header-icon-color-light: var(--text-dark);
          --header-hover-color: var(--accent-color-1);
          --header-bg-dark: rgba(26, 26, 26, 0.8); /* Dark semi-transparent */
          --header-bg-light: rgba(253, 253, 253, 0.85); /* Light semi-transparent */
          --logo-font: 'Montserrat', sans-serif;
      }
      /* --- HEADER STYLES --- */
      .site-header {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          width: 100%;
          height: var(--header-height);
          padding: 0 40px;
          z-index: 100;
          display: flex;
          align-items: center;
          background-color: var(--header-bg-dark);
          backdrop-filter: blur(12px);
          -webkit-backdrop-filter: blur(12px);
          transition: background-color 0.4s ease-out, backdrop-filter 0.4s ease-out;
      }
      body.on-light-section .site-header {
          background-color: var(--header-bg-light);
      }
      .header-logo {
          position: absolute;
          left: 50%;
          top: 50%;
          transform: translate(-50%, -50%);
      }
      .logo-link {
          text-decoration: none;
          display: inline-block;
      }
      .logo-link img {
          height: 50px;
          width: auto;
          display: block;
          transition: transform 0.3s ease;
      }
      .logo-link:hover img {
          transform: scale(1.08);
      }
      .header-nav {
          margin-left: auto;
      }
      .header-nav ul {
          list-style: none;
          display: flex;
          gap: 35px;
          padding: 0;
          margin: 0;
          align-items: center;
      }
      .header-nav li {
          position: relative;
      }
      .header-nav a {
          text-decoration: none;
          color: var(--header-icon-color-dark);
          font-size: 1.1rem;
          transition: transform 0.3s ease, color 0.3s ease;
          display: flex;
          flex-direction: column;
          align-items: center;
          position: relative;
      }
      body.on-light-section .header-nav a {
        color: var(--header-icon-color-light);
      }
      .header-nav a:hover {
          transform: scale(1.15);
          color: var(--header-hover-color);
      }
      .nav-label {
          position: absolute;
          top: 100%;
          margin-top: 6px;
          background-color: transparent;
          color: inherit;
          font-family: var(--logo-font);
          font-weight: 500;
          font-size: 0.75rem;
          padding: 2px 4px;
          border-radius: 4px;
          white-space: nowrap;
          opacity: 0;
          visibility: hidden;
          transform: translateY(5px) scale(0.9);
          transition: opacity 0.3s ease, transform 0.3s ease, visibility 0s 0.3s;
          pointer-events: none;
          text-shadow: 0 0 3px rgba(0, 0, 0, 0.5);
      }
      .header-nav a:hover .nav-label {
          opacity: 1;
          visibility: visible;
          transform: translateY(0) scale(1);
          transition: opacity 0.3s ease, transform 0.3s ease, visibility 0s 0s;
      }

      /* --- FOOTER STYLES --- */
      section#section-4 {
        position: relative;
        background-color: var(--bg-light-1);
        color: var(--text-dark);
        min-height: 100vh;
        height: auto;
        padding-bottom: 20vh; /* Ensure space for footer */
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
      }
      .site-footer {
          position: absolute;
          bottom: 30px;
          left: 0;
          width: 100%;
          padding: 0 30px;
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 15px;
          z-index: 5;
          opacity: 0; /* Animated in */
          transform: translateY(30px); /* Animated in */
      }
      .site-footer .copyright {
          font-size: 0.85rem;
          color: #888;
          text-align: center;
          font-family: 'Poppins', sans-serif;
      }
      .site-footer .social-icons {
          display: flex;
          justify-content: center;
          gap: 20px;
      }
      .site-footer .social-icons a {
          text-decoration: none;
          color: #aaa;
          font-size: 1.2rem;
          transition: transform 0.3s ease, color 0.3s ease;
          display: inline-block;
      }
      .site-footer .social-icons a:hover {
          transform: scale(1.15);
          color: var(--accent-color-2);
      }

      /* --- SECTION STYLES --- */
      section {
          min-height: 100vh;
          height: auto; /* Allow content to define height */
          width: 100%;
          display: flex;
          justify-content: center;
          align-items: center;
          position: relative; /* Needed for absolute positioning inside */
          overflow: hidden; /* Clip content, but allow pinned SVG to show */
          padding: 50px;
          /* Add top padding equal to header height for content clearance */
          padding-top: calc(var(--header-height) + 50px);
          /* Add negative margin to compensate for padding, making section backgrounds meet */
          /* Pinning handles the overlap now, so margin-top might not be needed */
           margin-top: calc(-1 * var(--header-height));
      }
      /* First section doesn't need the negative margin or top padding compensation */
      section:first-of-type {
          margin-top: 0;
          padding-top: 0; /* Hero section likely needs full height */
      }
       /* Prevent margin collapse issues when pinning */
      #section-services {
        overflow: visible; /* Allow pinned SVG to be seen */
      }


      /* --- SECTION 0: Hero --- */
      .hero-section {
          background-color: var(--bg-dark-1); color: var(--text-light); display: block; /* Override flex for hero layout */
          padding: 0; min-height: 100vh; height: 100vh; position: relative; overflow: hidden;
      }
      .hero-content {
        position: absolute; top: 65%; left: 50%; transform: translate(-50%, -50%); z-index: 2;
        text-align: center; width: 90%; max-width: 800px; opacity: 1; pointer-events: none;
       }
      .hero-content > * { pointer-events: auto; }
      .hero-tagline {
        font-size: clamp(2.2rem, 5vw, 3.5rem); font-weight: 600; margin: 0 auto; line-height: 1.4;
        font-family: 'Montserrat', sans-serif; color: var(--text-light); text-shadow: 0 2px 6px rgba(0, 0, 0, 0.75);
        overflow: hidden; /* Contain words */
       }
        .tagline-word {
          display: inline-block; opacity: 0; transform: scale(0.5); transform-origin: center center;
          margin: 0 4px; will-change: transform, opacity;
        }
      .hero-image-stack { position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; }
      .hero-image-stack::before { /* Dark overlay */
          content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
          background-color: rgba(0, 0, 0, 0.3); z-index: 1; pointer-events: none;
      }
      .hero-image {
          position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;
          object-position: center; opacity: 0; pointer-events: none; z-index: 0;
      }
      .hero-image.hero-image-active { opacity: 1; pointer-events: auto; }

      /* --- SECTION 1: About --- */
      .about-section { background-color: var(--bg-dark-2); color: var(--text-light); }
      .about-content-wrapper {
          max-width: 900px; opacity: 0; transform: translateY(50px); display: flex;
          justify-content: space-between; align-items: flex-start; width: 100%;
      }
      .about-text-container { flex: 1; margin-right: 40px; text-align: left; }
      .about-title {
          font-family: var(--logo-font); font-size: clamp(2rem, 5vw, 3.5rem); font-weight: 700;
          margin-bottom: 30px; color: var(--accent-color-1);
      }
      .about-text { max-width: 700px; /* Limit text width */ }
      .about-text p {
          font-size: clamp(0.9rem, 1.5vw, 1.1rem); line-height: 1.8; margin-bottom: 20px;
          font-weight: 300; font-family: 'Poppins', sans-serif;
      }
      .about-text strong { font-weight: 600; color: var(--accent-color-3); }
      .about-portrait {
          display: block; max-width: 350px; height: auto; border-radius: 10px; border: 3px solid var(--accent-color-1);
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3); opacity: 0; transform: scale(0.8); flex-shrink: 0;
      }

      /* --- SECTION 2: Services (Text Content Area) --- */
      .new-services-section {
          background-color: var(--bg-light-1); color: var(--text-dark); position: relative; display: flex;
          align-items: center; justify-content: center; padding: 50px;
          /* Ensure padding compensates for header even when pinned */
          padding-top: calc(var(--header-height) + 50px);
          min-height: 100vh; overflow: hidden; /* Change back to hidden */ padding-bottom: 50px;
          /* Negative margin might be needed again if pinning adds space incorrectly */
           margin-top: calc(-1 * var(--header-height));
      }
      .services-background-image {
          position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: url('services.jpg');
          background-size: cover; background-position: center center; opacity: 0; z-index: 1; will-change: opacity;
          pointer-events: none;
      }
      .services-text-content {
          position: relative; z-index: 3; max-width: 1100px; width: 90%; text-align: center;
          opacity: 0; /* Set via JS */ visibility: hidden; /* Set via JS */ transform: translateY(30px); /* Set via JS */
          will-change: transform, opacity, visibility; color: var(--text-dark); padding: 20px 0;
          text-shadow: 0 1px 3px rgba(255, 255, 255, 0.4); margin-bottom: 0; /* No extra bottom margin */
      }
      .services-title-new {
          font-family: var(--logo-font); font-size: clamp(1.8rem, 4vw, 3rem); font-weight: 700;
          margin-bottom: 50px; color: var(--accent-color-4);
          opacity: 0; /* Set via JS */ visibility: hidden; /* Set via JS */ transform: translateY(20px); /* Set via JS */
          will-change: transform, opacity, visibility;
      }
      .services-list-new {
          margin-top: 30px; display: flex; flex-direction: row; justify-content: space-around;
          flex-wrap: wrap; align-items: flex-start; gap: 30px;
      }
      .service-item-new {
          opacity: 0; /* Set via JS */ visibility: hidden; /* Set via JS */ transform: translateY(20px); /* Set via JS */
          flex: 1; min-width: 250px; max-width: 360px; text-align: center;
          will-change: transform, opacity, visibility; background-color: rgba(253, 253, 253, 0.1); /* Subtle background */
          padding: 20px; border-radius: 6px;
      }
      .service-icon-new {
          font-size: 2.5rem; color: var(--accent-color-1); margin-bottom: 15px; display: inline-block;
      }
      .service-item-new h3 {
          font-family: 'Montserrat', sans-serif; font-size: 1.3rem; font-weight: 700;
          margin-bottom: 10px; color: var(--accent-color-4);
      }
      .service-item-new p {
          font-family: 'Poppins', sans-serif; font-size: 0.9rem; line-height: 1.6;
          color: var(--accent-color-2); font-weight: 400; min-height: 50px; /* Align bottom edges */
      }

      /* --- SECTION 3: Portfolio --- */
      .portfolio-section { background-color: var(--bg-dark-2); color: var(--text-light); }
      .portfolio-preview-container {
          display: flex; flex-direction: column; align-items: center; width: 100%;
          max-width: 1200px; opacity: 0; transform: translateY(50px);
      }
      .portfolio-title {
          font-family: var(--logo-font); font-size: clamp(2rem, 5vw, 3.5rem); font-weight: 700;
          margin-bottom: 50px; text-align: center; color: var(--accent-color-1);
      }
      .portfolio-grid {
          display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px;
          width: 100%; margin-bottom: 50px;
      }
      .portfolio-item-placeholder {
          aspect-ratio: 4 / 3; background: linear-gradient(135deg, var(--accent-color-2), var(--accent-color-4));
          border-radius: 8px; display: flex; justify-content: center; align-items: center;
          color: var(--text-light); font-family: 'Montserrat', sans-serif; font-size: 1.1rem;
          font-weight: 700; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); opacity: 0; transform: scale(0.9);
          transition: transform 0.3s ease, box-shadow 0.3s ease; padding: 15px; text-align: center;
      }
      .portfolio-item-placeholder:hover { transform: scale(1.03); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3); }
      .portfolio-cta {
          display: inline-block; background-color: var(--accent-color-1); color: var(--text-dark);
          padding: 15px 40px; border-radius: 50px; font-family: 'Montserrat', sans-serif;
          font-weight: 700; text-decoration: none; font-size: 1rem;
          transition: background-color 0.3s ease, transform 0.3s ease, color 0.3s ease;
          opacity: 0; transform: translateY(20px);
      }
      .portfolio-cta:hover {
          background-color: var(--accent-color-3); color: var(--text-dark); transform: translateY(0px) scale(1.05);
      }

      /* --- SECTION 4: Contact --- */
      .contact-section { color: var(--text-dark); background-color: var(--bg-light-1); }
      .contact-form-container {
          background-color: var(--bg-light-2); padding: 50px clamp(20px, 8vw, 80px); border-radius: 10px;
          box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08); width: 100%; max-width: 700px;
          opacity: 0; transform: translateY(50px); z-index: 1; color: var(--text-dark);
      }
      .contact-title {
          font-family: var(--logo-font); font-size: clamp(1.8rem, 4vw, 3rem); font-weight: 700;
          margin-bottom: 40px; text-align: center; color: var(--accent-color-4);
      }
      .contact-form .form-group { margin-bottom: 25px; position: relative; }
      .contact-form label {
          display: block; font-family: 'Poppins', sans-serif; font-weight: 600; font-size: 0.9rem;
          color: var(--accent-color-2); margin-bottom: 8px; opacity: 0; transform: translateX(-20px);
      }
      .contact-form input[type="text"], .contact-form input[type="email"], .contact-form textarea {
          width: 100%; padding: 15px 20px; border: 1px solid #ccc; border-radius: 6px;
          font-family: 'Poppins', sans-serif; font-size: 1rem; font-weight: 400; color: var(--text-dark);
          background-color: var(--bg-light-2); transition: border-color 0.3s ease, box-shadow 0.3s ease;
          opacity: 0; transform: translateX(-20px);
      }
      .contact-form input[type="text"]:focus, .contact-form input[type="email"]:focus, .contact-form textarea:focus {
          border-color: var(--accent-color-1); box-shadow: 0 0 0 3px rgba(192, 160, 128, 0.3); outline: none;
      }
      .contact-form textarea { min-height: 150px; resize: vertical; }
      .contact-form button {
          display: block; width: 100%; padding: 15px 30px; background-color: var(--accent-color-4);
          color: var(--text-light); border: none; border-radius: 50px; font-family: 'Montserrat', sans-serif;
          font-size: 1.1rem; font-weight: 700; cursor: pointer;
          transition: background-color 0.3s ease, transform 0.3s ease, color 0.3s ease;
          margin-top: 10px; opacity: 0; transform: translateY(20px);
      }
      .contact-form button:hover {
          background-color: var(--accent-color-1); color: var(--text-dark); transform: scale(1.03) translateY(0);
      }

      /* --- Navigation Dots --- */
      .nav-dots {
          position: fixed; top: 50%; right: 30px; transform: translateY(-50%); display: flex;
          flex-direction: column; z-index: 101;
      }
      .nav-dot {
          width: 10px; height: 10px; border-radius: 50%; background-color: rgba(255, 255, 255, 0.3);
          margin: 12px 0; cursor: pointer; transition: background-color 0.3s, transform 0.3s;
          border: 1px solid rgba(0, 0, 0, 0.2);
      }
      body.on-light-section .nav-dot { background-color: rgba(0, 0, 0, 0.2); border: 1px solid rgba(255, 255, 255, 0.2); }
      .nav-dot.active { background-color: white; transform: scale(1.4); border: 1px solid rgba(0, 0, 0, 0.3); }
      body.on-light-section .nav-dot.active { background-color: var(--text-dark); border: 1px solid rgba(255, 255, 255, 0.3); }

      /* --- Scroll Indicator --- */
      .scroll-indicator {
          position: absolute; bottom: 10vh; left: 50%; transform: translateX(-50%);
          color: rgba(255, 255, 255, 0.7); font-size: 0.8rem; font-family: 'Poppins', sans-serif;
          display: flex; flex-direction: column; align-items: center; z-index: 5;
          opacity: 0.8; transition: opacity 0.5s ease; letter-spacing: 1px; background-color: transparent;
      }
      .scroll-indicator span { font-weight: 400; }
      .scroll-indicator i { font-size: 1.2rem; margin-top: 8px; color: #fff; }
      @keyframes scrollArrow { 0% { transform: translateY(0); opacity: 0.3; } 50% { transform: translateY(8px); opacity: 1; } 100% { transform: translateY(0); opacity: 0.3; } }
      .scroll-indicator i { animation: scrollArrow 2s infinite cubic-bezier(0.68, -0.55, 0.27, 1.55); }
      body.scrolled .scroll-indicator { opacity: 0; pointer-events: none; }

      /* --- STICKY SVG CONTAINER (POSITION FIXED) --- */
      #sticky-svg-drawing-container {
          position: fixed; /* Use fixed positioning */
          bottom: 5vh; /* Raise it from the bottom */
          left: 0;
          width: 100%;
          height: 20vh; /* Make it taller */
          z-index: 50;
          opacity: 0; visibility: hidden; /* Controlled by JS autoAlpha */
          pointer-events: none;
          overflow: hidden; /* Keep overflow hidden */
          background: transparent;
      }
      #sticky-svg-drawing-container svg {
          display: block; width: 100%; height: 100%; overflow: visible;
          position: absolute; bottom: 0; left: 0; /* Position SVG at bottom of container */
      }
      #sticky-svg-drawing-container .drawing-line {
          fill: none; stroke: var(--accent-color-1); /* Changed stroke color for visibility */
          stroke-width: 3;
          stroke-linecap: round; stroke-linejoin: round; will-change: stroke-dashoffset;
      }

      /* Optional: Style for pinned section */
      #section-services.is-pinned {
        /* Add any styles needed when pinned */
      }


      /* --- RESPONSIVE STYLES --- (Keep existing responsive styles) */
        @media (max-width: 992px) {
            .site-header { padding: 0 25px; } .logo-link img { height: 45px; } .header-nav ul { gap: 25px; }
            section { padding-left: 30px; padding-right: 30px; } section:first-of-type { padding: 0;}
            section:not(:first-of-type) { padding-top: calc(var(--header-height) + 40px); margin-top: calc(-1 * var(--header-height)); }
            .portfolio-grid { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
            .contact-form-container { padding: 40px clamp(15px, 6vw, 60px); }
            .about-content-wrapper { flex-direction: column-reverse; align-items: center; }
            .about-text-container { margin-right: 0; margin-top: 30px; text-align: center; }
            .about-portrait { max-width: 250px; margin-bottom: 20px; }
            .scroll-indicator { bottom: 8vh; } .hero-content { top: 68%; max-width: 90%;}
            .hero-tagline { font-size: clamp(1.8rem, 4vw, 3rem); }
            .services-text-content { max-width: 90%; }
            #sticky-svg-drawing-container { height: 18vh; bottom: 4vh; } /* Adjust sticky SVG */
         }
         @media (max-width: 768px) {
            :root { --header-height: 70px; } .site-header { padding: 0 20px; } .logo-link img { height: 40px; }
            .header-nav ul { gap: 20px; } .header-nav a { font-size: 1rem; } .nav-label { display: none; }
            .nav-dots { right: 20px; } .nav-dot { width: 9px; height: 9px; margin: 10px 0; }
            section { padding-left: 20px; padding-right: 20px; } section:first-of-type { padding: 0;}
             section:not(:first-of-type) { padding-top: calc(var(--header-height) + 30px); margin-top: calc(-1 * var(--header-height)); }
            .portfolio-grid { gap: 20px; } .portfolio-item-placeholder { font-size: 1rem; }
            .contact-form-container { padding: 30px clamp(10px, 4vw, 40px); }
            .contact-title { font-size: clamp(1.6rem, 5vw, 2.5rem); margin-bottom: 30px; }
            .contact-form input, .contact-form textarea { padding: 12px 15px; font-size: 0.95rem;}
            .contact-form button { padding: 12px 25px; font-size: 1rem; }
            .site-footer { bottom: 20px; } .site-footer .copyright { font-size: 0.75rem; }
            .site-footer .social-icons { gap: 15px; } .site-footer .social-icons a { font-size: 1.1rem; }
            .about-portrait { max-width: 200px; } .hero-content { top: 70%; max-width: 90%; }
            .hero-tagline { font-size: clamp(1.6rem, 5vw, 2.5rem); line-height: 1.4; }
            .services-title-new { font-size: clamp(1.6rem, 5vw, 2.5rem); margin-bottom: 40px; }
            .service-item-new { max-width: 300px; padding: 15px; }
            .service-item-new h3 { font-size: 1.1rem; } .service-item-new p { font-size: 0.85rem; min-height: 40px;}
            .service-icon-new { font-size: 2.2rem; }
            #sticky-svg-drawing-container { height: 15vh; bottom: 3vh; } /* Adjust sticky SVG */
         }
          @media (max-width: 480px) {
            :root { --header-height: 65px; } .site-header { padding: 0 15px; } .logo-link img { height: 35px; }
            .header-nav ul { gap: 15px; } .header-nav a { font-size: 0.9rem; } .nav-dots { right: 15px; }
            .hero-tagline { font-size: clamp(1.4rem, 6vw, 2rem); line-height: 1.4; }
            .about-title { font-size: clamp(1.8rem, 6vw, 2.8rem); }
            .about-text p { font-size: clamp(0.85rem, 3.5vw, 1rem); line-height: 1.7; }
            .about-portrait { max-width: 150px; }
            .portfolio-title { font-size: clamp(1.8rem, 6vw, 2.8rem); }
            .portfolio-grid { grid-template-columns: 1fr; gap: 15px; } .portfolio-item-placeholder { font-size: 0.9rem; }
            .contact-title { font-size: clamp(1.5rem, 6vw, 2.2rem); }
            .scroll-indicator { bottom: 6vh; font-size: 0.75rem;}
            section { padding-left: 15px; padding-right: 15px; } section:first-of-type { padding: 0;}
            section:not(:first-of-type) { padding-top: calc(var(--header-height) + 25px); margin-top: calc(-1 * var(--header-height)); }
            .contact-form-container { padding: 25px 15px; } .hero-content { top: 72%; max-width: 95%; }
            .tagline-word { margin: 0 2px;}
            .services-text-content { padding: 15px 0; width: 95%; }
            .services-title-new { font-size: clamp(1.5rem, 6vw, 2.2rem); margin-bottom: 25px;}
            .services-list-new { flex-direction: column; align-items: center; gap: 20px; }
            .service-item-new { max-width: 90%; min-width: unset; padding: 12px; }
            .service-item-new h3 { font-size: 1rem; } .service-item-new p { font-size: 0.8rem; min-height: unset; }
            .service-icon-new { font-size: 2rem; margin-bottom: 10px;}
             #sticky-svg-drawing-container { height: 12vh; bottom: 2vh; }/* Adjust sticky SVG */
         }
    </style>
</head>
<body data-current-theme="dark">

    <header class="site-header" id="site-header">
        <div class="header-logo">
            <a href="#section-0" class="logo-link" aria-label="LAYA Home">
                <img src="logo.png" alt="LAYA Architecture Studio Logo">
            </a>
        </div>
        <nav class="header-nav">
             <ul>
                 <li><a href="#section-0" aria-label="Home"><i class="fas fa-home"></i><span class="nav-label">Home</span></a></li>
                 <li><a href="#section-1" aria-label="About"><i class="fas fa-info-circle"></i><span class="nav-label">About</span></a></li>
                 <li><a href="#section-services" aria-label="Services"><i class="fas fa-concierge-bell"></i><span class="nav-label">Services</span></a></li>
                 <li><a href="#section-3" aria-label="Portfolio"><i class="fas fa-drafting-compass"></i><span class="nav-label">Portfolio</span></a></li>
                 <li><a href="#section-4" aria-label="Contact"><i class="fas fa-envelope"></i><span class="nav-label">Contact</span></a></li>
             </ul>
        </nav>
    </header>

    <div class="nav-dots">
        <div class="nav-dot active" data-section="0"></div>
        <div class="nav-dot" data-section="1"></div>
        <div class="nav-dot" data-section="services"></div>
        <div class="nav-dot" data-section="3"></div>
        <div class="nav-dot" data-section="4"></div>
    </div>

    <section class="hero-section" id="section-0" data-theme="dark">
        <div class="hero-image-stack">
            <img src="interior_1.png" alt="Modern Interior Design 1" class="hero-image hero-image-active" id="hero-img-1">
            <img src="interior_2.png" alt="Classic Interior Design 2" class="hero-image" id="hero-img-2">
            <img src="interior_3.png" alt="Innovative Interior Design 3" class="hero-image" id="hero-img-3">
        </div>
         <div class="hero-content">
             <p class="hero-tagline">
                  <span class="tagline-word">Design</span>
                  <span class="tagline-word">that</span>
                  <span class="tagline-word">inspires</span>
             </p>
         </div>
         <div class="scroll-indicator">
              <span>Explore</span>
             <i class="fas fa-chevron-down"></i>
         </div>
    </section>

    <section class="about-section" id="section-1" data-theme="dark">
        <div class="about-content-wrapper">
             <div class="about-text-container">
                 <h2 class="about-title">Our Philosophy</h2>
                 <div class="about-text">
                     <p>At LAYA, we believe architecture is more than just buildings; it's about crafting experiences and shaping environments. Our approach is rooted in a deep respect for <strong>tradition and context</strong>, while constantly pushing the boundaries of <strong>design innovation</strong>.</p>
                     <p>We work closely with our clients, understanding their vision and needs to create spaces that are not only aesthetically stunning but also functional, sustainable, and enduring. From initial concept to final construction, <strong>collaboration and meticulous attention to detail</strong> are at the heart of everything we do.</p>
                     <p>Let us help you bring your vision to life.</p>
                 </div>
             </div>
             <img src="portrait.jpg" alt="Architect Portrait LAYA Studio" class="about-portrait">
         </div>
    </section>

    <section class="new-services-section" id="section-services" data-theme="light">
        <div class="services-background-image"></div>
        <div class="services-text-content">
            <h2 class="services-title-new">What We Offer</h2>
            <div class="services-list-new">
                <div class="service-item-new">
                    <i class="fas fa-compass-drafting service-icon-new"></i>
                    <h3>Architectural Design</h3>
                    <p>Creating bespoke blueprints for residential, commercial, and public spaces that balance form and function.</p>
                </div>
                <div class="service-item-new">
                    <i class="fas fa-house-chimney-window service-icon-new"></i>
                    <h3>Interior Spaces</h3>
                    <p>Designing thoughtful and elegant interiors that reflect your style and enhance daily living or working.</p>
                </div>
                <div class="service-item-new">
                    <i class="fas fa-binoculars service-icon-new"></i>
                    <h3>Project Visioning</h3>
                    <p>Collaborating from the earliest stages to define project goals, feasibility, and conceptual direction.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="portfolio-section" id="section-3" data-theme="dark">
        <div class="portfolio-preview-container">
            <h2 class="portfolio-title">Featured Work</h2>
            <div class="portfolio-grid">
                <div class="portfolio-item-placeholder">Project Alpha</div>
                <div class="portfolio-item-placeholder">Villa Beta</div>
                <div class="portfolio-item-placeholder">Urban Complex Gamma</div>
                <div class="portfolio-item-placeholder">Cultural Center Delta</div>
                <div class="portfolio-item-placeholder">Residence Epsilon</div>
                <div class="portfolio-item-placeholder">Commercial Hub Zeta</div>
            </div>
            <a href="#portfolio-full" class="portfolio-cta">Explore Full Portfolio</a>
            </div>
    </section>

    <section class="contact-section" id="section-4" data-theme="light">
        <div class="contact-form-container">
             <h2 class="contact-title">Get In Touch</h2>
             <form class="contact-form" action="#" method="POST">
                 <div class="form-group"><label for="name">Name</label><input type="text" id="name" name="name" required placeholder="Your Full Name"></div>
                 <div class="form-group"><label for="email">Email</label><input type="email" id="email" name="email" required placeholder="your.email@example.com"></div>
                 <div class="form-group"><label for="subject">Subject</label><input type="text" id="subject" name="subject" placeholder="Briefly, what's this about?"></div>
                 <div class="form-group"><label for="message">Message</label><textarea id="message" name="message" required placeholder="Tell us more about your project or inquiry..."></textarea></div>
                 <button type="submit">Send Message</button>
             </form>
         </div>
         <footer class="site-footer">
             <div class="social-icons">
                 <a href="#" aria-label="Instagram" title="Instagram"><i class="fab fa-instagram"></i></a>
                 <a href="#" aria-label="LinkedIn" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                 <a href="#" aria-label="Pinterest" title="Pinterest"><i class="fab fa-pinterest"></i></a>
                 <a href="#" aria-label="Behance" title="Behance"><i class="fab fa-behance"></i></a>
             </div>
             <p class="copyright">&copy; <span id="copyright-year"></span> LAYA Architecture Studio. All rights reserved.</p>
         </footer>
    </section>

    <div id="sticky-svg-drawing-container">
        <svg preserveAspectRatio="xMinYMax meet" viewBox="0 0 1200 150">
             <path class="drawing-line" d="M 0 100 L 100 100 V 50 L 150 10 L 200 50 V 100 H 100 L 500 100 V 60 L 560 25 L 620 60 V 100 H 500 L 900 100 V 70 L 975 30 L 1050 70 V 100 H 900 L 1200 100" />
        </svg>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollToPlugin.min.js"></script>
    <script>
        gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);

        const getHeaderHeight = () => {
            const header = document.getElementById('site-header');
            return header ? header.offsetHeight : 75; // Fallback height
        }

        // --- (Keep initHero, initAbout, initPortfolio, initContact, initHeader, initFooter, initNavigation functions as they were before the previous attempt) ---
        // --- Hero Section Animation ---
        function initHero() {
            const heroSection = document.querySelector('.hero-section');
            if (!heroSection) return;
            const images = gsap.utils.toArray('.hero-image');
            const content = document.querySelector('.hero-content');
            const words = gsap.utils.toArray('.tagline-word', content);
            let currentImageIndex = 0;
            let imageInterval;

            if (images.length === 0) { console.warn("No hero images found."); return; }
            gsap.set(images[0], { opacity: 1, pointerEvents: 'auto' });
            gsap.set(images.slice(1), { opacity: 0, pointerEvents: 'none' });
            gsap.set(content, { opacity: 1 }); // Content is visible initially

            const wordTl = gsap.timeline({
                scrollTrigger: { trigger: heroSection, start: "top 65%", toggleActions: "play none none reset" }, // Use reset on scroll up
                delay: 0.1
            });

            if (words.length > 0) {
                wordTl.from(words, { opacity: 0, scale: 0.5, duration: 0.7, ease: 'back.out(1.5)', stagger: 0.1 });
            } else { console.warn("No tagline words found for animation."); }

            function switchImage() {
                 if (images.length <= 1) return;
                 const nextImageIndex = (currentImageIndex + 1) % images.length;
                 const tl = gsap.timeline({ defaults: { ease: "power1.inOut" } });
                 tl.to(images[currentImageIndex], { opacity: 0, duration: 1.5 })
                   .set(images[currentImageIndex], { pointerEvents: 'none' })
                   .set(images[nextImageIndex], { opacity: 0 }, "<")
                   .to(images[nextImageIndex], { opacity: 1, duration: 1.5 }, "<0.3")
                   .set(images[nextImageIndex], { pointerEvents: 'auto' });
                 currentImageIndex = nextImageIndex;
             }
             function startImageTimer() { clearInterval(imageInterval); if (images.length > 1) { imageInterval = setInterval(switchImage, 5000); } }
             startImageTimer();

             // Parallax effect
             images.forEach(img => { gsap.to(img, { y: -30, ease: "none", scrollTrigger: { trigger: heroSection, start: "top top", end: "bottom top", scrub: 1.5 } }); });
             gsap.to(content, { yPercent: -15, ease: "none", scrollTrigger: { trigger: heroSection, start: "top top", end: "bottom top", scrub: 1 } });
        }
        // --- About Section Animation ---
        function initAbout() {
             const aboutSection = document.querySelector('.about-section');
             const aboutContentWrapper = document.querySelector('.about-content-wrapper');
             const aboutPortrait = document.querySelector('.about-portrait');
             if (!aboutSection || !aboutContentWrapper || !aboutPortrait) { console.warn("About elements missing."); return; }
             const tl = gsap.timeline({ scrollTrigger: { trigger: aboutSection, start: "top 70%", toggleActions: "play none none reverse" } });
             tl.to(aboutContentWrapper, { opacity: 1, y: 0, duration: 1, ease: 'power3.out' })
               .to(aboutPortrait, { opacity: 1, scale: 1, duration: 0.8, ease: 'back.out(1.7)' }, "-=0.6");
        }
        // --- Portfolio Section Animation ---
        function initPortfolio() {
            const portfolioSection = document.querySelector('.portfolio-section');
            const container = document.querySelector('.portfolio-preview-container');
            if (!portfolioSection || !container) { console.warn("Portfolio elements missing."); return; }
            const items = gsap.utils.toArray('.portfolio-item-placeholder', container);
            const cta = document.querySelector('.portfolio-cta', container);
            if (!items.length || !cta) { console.warn("Portfolio items/CTA missing."); return; }
            const tl = gsap.timeline({ scrollTrigger: { trigger: portfolioSection, start: "top 65%", toggleActions: "play none none reverse" } });
            tl.to(container, { opacity: 1, y: 0, duration: 0.5, ease: 'power2.out' })
              .to(items, { opacity: 1, scale: 1, duration: 0.6, ease: 'back.out(1.4)', stagger: 0.15 }, "-=0.3")
              .to(cta, { opacity: 1, y: 0, duration: 0.7, ease: 'power2.out' }, "-=0.5");
        }
        // --- Contact Section Animation ---
        function initContact() {
            const contactSection = document.querySelector('.contact-section');
            const container = document.querySelector('.contact-form-container');
            if (!contactSection || !container) { console.warn("Contact elements missing."); return; }
            const labels = gsap.utils.toArray('.contact-form label', container);
            const inputs = gsap.utils.toArray('.contact-form input, .contact-form textarea', container);
            const button = container.querySelector('.contact-form button');
            if (!labels.length || !inputs.length || !button) { console.warn("Contact form elements missing."); return; }
            const tl = gsap.timeline({ scrollTrigger: { trigger: contactSection, start: "top 60%", toggleActions: "play none none reverse" } });
            tl.to(container, { opacity: 1, y: 0, duration: 0.8, ease: 'power3.out' })
              .to(labels, { opacity: 1, x: 0, duration: 0.5, ease: 'power2.out', stagger: 0.1 }, "-=0.5")
              .to(inputs, { opacity: 1, x: 0, duration: 0.5, ease: 'power2.out', stagger: 0.1 }, "<0.1")
              .to(button, { opacity: 1, y: 0, duration: 0.6, ease: 'back.out(1.7)' }, "-=0.3");
        }
        // --- Header Setup ---
        function initHeader() {
             const header = document.getElementById('site-header');
             if (!header) { console.warn("Site header not found."); return; }
             const headerLinks = document.querySelectorAll('.header-nav a[href^="#"]');
             headerLinks.forEach(anchor => {
                 anchor.addEventListener('click', function (e) {
                     const href = this.getAttribute('href');
                     if (href && href.startsWith('#') && href.length > 1) {
                         try {
                             const target = document.querySelector(href);
                             if (target) {
                                 e.preventDefault();
                                 const offset = (target.id === 'section-0' ? 0 : getHeaderHeight());
                                 gsap.to(window, { duration: 1.2, scrollTo: { y: target, offsetY: offset }, ease: "power2.inOut" });
                             } else { console.warn(`Scroll target '${href}' not found.`); }
                         } catch (error) { console.error(`Error selecting scroll target '${href}':`, error); }
                     }
                 });
             });
             const logoLink = document.querySelector('.logo-link');
              if (logoLink) {
                  logoLink.addEventListener('click', function (e) {
                      const href = this.getAttribute('href');
                      if (href === '#section-0') {
                          e.preventDefault();
                          const target = document.getElementById('section-0');
                          if(target){ gsap.to(window, { duration: 1.2, scrollTo: { y: target }, ease: "power2.inOut" }); }
                      }
                   });
               }
        }
        // --- Footer Setup ---
        function initFooter() {
            const footer = document.querySelector('#section-4 .site-footer');
            const copyrightYearSpan = document.getElementById('copyright-year');
            if (!footer) { console.warn("Site footer missing."); return; }
            if(copyrightYearSpan) { copyrightYearSpan.textContent = new Date().getFullYear(); }
            else { console.warn("Copyright year span missing."); }
            gsap.to(footer, { opacity: 1, y: 0, duration: 1.0, ease: 'power2.out', scrollTrigger: { trigger: '#section-4', start: "center bottom-=10%", toggleActions: "play none none reverse", id: "footer-reveal" } });
        }
        // --- Navigation Setup ---
        function initNavigation() {
              const sectionsNodeList = document.querySelectorAll('section[id^="section-"]');
              const sections = Array.from(sectionsNodeList);
              const navDots = document.querySelectorAll('.nav-dot');
              const body = document.body;
              const header = document.getElementById('site-header'); // Needed for height calculation

              if (navDots.length === 0 || sections.length === 0 || !header) { console.warn("Navigation elements missing (dots, sections, or header)."); return; }
              if (navDots.length !== sections.length) { console.warn(`Dot/Section mismatch: ${navDots.length} dots, ${sections.length} sections. Navigation might be inaccurate.`); }

              navDots.forEach(dot => {
                  dot.addEventListener('click', (e) => {
                      e.preventDefault();
                      const sectionIdSuffix = dot.getAttribute('data-section');
                      const targetSection = document.getElementById(`section-${sectionIdSuffix}`);
                      if (targetSection) {
                          const offset = (targetSection.id === 'section-0' ? 0 : getHeaderHeight());
                          gsap.to(window, { duration: 1.2, scrollTo: { y: targetSection, offsetY: offset }, ease: "power2.inOut" });
                      }
                      else { console.error(`Target section #section-${sectionIdSuffix} not found for dot click.`); }
                  });
              });

              function updateActiveState(activeSectionIdSuffix, activeTheme) {
                  navDots.forEach((dot) => { dot.classList.toggle('active', dot.getAttribute('data-section') === activeSectionIdSuffix); });
                  const currentBodyTheme = body.classList.contains('on-light-section') ? 'light' : 'dark';
                  if (activeTheme !== currentBodyTheme) { body.classList.toggle('on-light-section', activeTheme === 'light'); }
              }

              sections.forEach((section) => {
                  const sectionIdSuffix = section.id.replace('section-', '');
                  const theme = section.getAttribute('data-theme') || 'dark';
                  ScrollTrigger.create({
                      trigger: section,
                      start: () => section.id === 'section-0' ? `top top` : `top top+=${getHeaderHeight()}px`,
                      end: () => {
                          const isLastSection = section === sections[sections.length - 1];
                          return isLastSection ? "bottom bottom" : `bottom top+=${getHeaderHeight() + 1}px`;
                      },
                      id: `section-nav-${sectionIdSuffix}`,
                      onToggle: (self) => {
                          if (self.isActive) {
                              updateActiveState(sectionIdSuffix, theme);
                          }
                      },
                      invalidateOnRefresh: true
                  });
              });

               let scrollIndicatorState = { scrolled: window.scrollY > 50 };
               body.classList.toggle('scrolled', scrollIndicatorState.scrolled);
               const scrollListener = () => {
                 const isScrolled = window.scrollY > 50;
                 if (isScrolled !== scrollIndicatorState.scrolled) { body.classList.toggle('scrolled', isScrolled); scrollIndicatorState.scrolled = isScrolled; }
               };
               window.addEventListener('scroll', scrollListener, { passive: true });

               setTimeout(() => {
                   let initialSectionIdSuffix = '0';
                   let initialTheme = 'dark';
                   const currentScrollY = window.scrollY;
                   const currentHeaderHeight = getHeaderHeight();
                   const threshold = currentHeaderHeight / 2;

                   for (let i = sections.length - 1; i >= 0; i--) {
                       const section = sections[i];
                        // Use getBoundingClientRect for potentially more accurate viewport position check
                       const rect = section.getBoundingClientRect();
                       const sectionTopRelativeToViewport = rect.top;
                       const sectionBottomRelativeToViewport = rect.bottom;
                       const viewportHeight = window.innerHeight;

                       // Check if the section is significantly visible (e.g., top edge is above midpoint, bottom edge is below midpoint)
                       if (sectionTopRelativeToViewport < viewportHeight / 2 && sectionBottomRelativeToViewport > threshold) {
                            initialSectionIdSuffix = section.id.replace('section-', '');
                            initialTheme = section.getAttribute('data-theme') || 'dark';
                            break;
                        }
                       // Fallback for the very top section if nothing else matches
                       else if (i === 0 && currentScrollY < section.offsetHeight / 2) {
                            initialSectionIdSuffix = '0';
                            initialTheme = 'dark';
                            break;
                       }
                   }
                   updateActiveState(initialSectionIdSuffix, initialTheme);
                   scrollIndicatorState.scrolled = window.scrollY > 50;
                   body.classList.toggle('scrolled', scrollIndicatorState.scrolled);
                   ScrollTrigger.refresh();
               }, 200); // Slightly longer delay
        }


        // --- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< ---
        // --- REVISED: Services Section Animation Sequence ---
        // --- <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< ---
        function initServicesSequence() {
            const triggerSection = document.getElementById('section-services');
            // SVG Drawing Elements (using fixed container now)
            const stickyContainer = document.getElementById('sticky-svg-drawing-container');
            const drawingLine = stickyContainer?.querySelector('.drawing-line');
            // Service Section Content Elements
            const bgImage = triggerSection?.querySelector('.services-background-image');
            const textContent = triggerSection?.querySelector('.services-text-content');
            const title = textContent?.querySelector('.services-title-new');
            const items = textContent ? gsap.utils.toArray('.service-item-new', textContent) : [];

            // Combined check for all necessary elements
            if (!triggerSection || !stickyContainer || !drawingLine || !bgImage || !textContent || !title || items.length === 0) {
                console.warn("Services sequence elements missing. Aborting advanced animation setup.");
                // Simple fallback: just reveal content on scroll past a point
                 if(bgImage) gsap.set(bgImage, { opacity: 0 });
                 if(textContent) gsap.set(textContent, { autoAlpha: 0, y: 30 });
                 if(title) gsap.set(title, { autoAlpha: 0, y: 20 });
                 if(items.length > 0) gsap.set(items, { autoAlpha: 0, y: 20 });

                 ScrollTrigger.create({
                    trigger: triggerSection,
                    start: "top center",
                    toggleActions: "play none none reverse",
                    onEnter: () => {
                        gsap.to(bgImage, { opacity: 0.7, duration: 1.0 });
                        gsap.to(textContent, { autoAlpha: 1, y: 0, duration: 0.8, delay: 0.2 });
                        gsap.to(title, { autoAlpha: 1, y: 0, duration: 0.6, delay: 0.4 });
                        gsap.to(items, { autoAlpha: 1, y: 0, duration: 0.7, delay: 0.6, stagger: 0.2 });
                    },
                     onLeaveBack: () => { // Reset on scroll back up
                        gsap.set(bgImage, { opacity: 0 });
                        gsap.set(textContent, { autoAlpha: 0, y: 30 });
                        gsap.set(title, { autoAlpha: 0, y: 20 });
                        gsap.set(items, { autoAlpha: 0, y: 20 });
                     }
                 });
                return; // Exit if elements are missing
            }

            // --- Initial States (Hidden) ---
            gsap.set(stickyContainer, { autoAlpha: 0 }); // Fixed container starts hidden
            gsap.set(bgImage, { opacity: 0 });
            gsap.set(textContent, { autoAlpha: 0, y: 30 });
            gsap.set(title, { autoAlpha: 0, y: 20 });
            gsap.set(items, { autoAlpha: 0, y: 20 });

            let pathLength = 0;

            try {
                pathLength = drawingLine.getTotalLength();
                if (pathLength <= 0) throw new Error("SVG path length is zero or could not be calculated.");
                gsap.set(drawingLine, { strokeDasharray: pathLength, strokeDashoffset: pathLength });

                // --- 1. TIMED Drawing Animation Timeline ---
                // This plays automatically when the pin starts
                const drawingAnimationTimeline = gsap.timeline({ paused: true });
                drawingAnimationTimeline
                    .to(stickyContainer, { autoAlpha: 1, duration: 0.4, ease: 'power1.in' }) // Fade in container
                    .to(drawingLine, {
                        strokeDashoffset: 0,
                        duration: 2.5, // <<< DURATION of the drawing itself
                        ease: 'linear'
                     }, ">") // Start drawing after container fades in
                    .to(stickyContainer, {
                        autoAlpha: 0,
                        duration: 0.4, // Fade out container
                        ease: 'power1.out'
                    }, "+=0.2"); // Start fade out shortly after drawing finishes

                // --- 2. Pinning ScrollTrigger ---
                // This pins the section and triggers the timed drawing animation
                ScrollTrigger.create({
                    trigger: triggerSection,
                    pin: true,
                    start: () => `top top+=${getHeaderHeight()}px`,
                    // Pin duration needs to be long enough for the drawingAnimationTimeline to complete.
                    // Timeline duration is approx 0.4 + 2.5 + 0.2 + 0.4 = 3.5 seconds.
                    // We need enough scroll pixels to cover this time. Let's use a generous amount.
                    end: "+=2000", // <<< Adjust scroll distance for pin duration
                    toggleClass: "is-pinned",
                    id: "services-pin",
                    invalidateOnRefresh: true,
                    // markers: true, // For debugging pin start/end
                    onEnter: () => drawingAnimationTimeline.play(),
                    onLeaveBack: () => drawingAnimationTimeline.reverse() // Reverse animation when scrolling back up
                     // No scrub needed here
                });


                // --- 3. Content Reveal Timeline (Original smooth fade-in) ---
                const contentRevealTimeline = gsap.timeline({ paused: true });
                 contentRevealTimeline
                     .to(bgImage, { opacity: 0.7, duration: 1.0, ease: 'power1.inOut' })
                     .to(textContent, { autoAlpha: 1, y: 0, duration: 0.8, ease: 'power2.out' }, "-=0.8") // Overlap bg image fade slightly
                     .to(title, { autoAlpha: 1, y: 0, duration: 0.6, ease: 'power2.out' }, "<+=0.1") // Stagger title in
                     .to(items, { autoAlpha: 1, y: 0, duration: 0.7, ease: 'power2.out', stagger: 0.2 }, "<+=0.1"); // Stagger items in


                // --- 4. Content Reveal ScrollTrigger ---
                // Triggers the content reveal *after* the drawing should be finished.
                ScrollTrigger.create({
                    trigger: triggerSection,
                    // Start this LATER. Needs to be after the pin ends OR far enough into the pin.
                    // If pin ends at top+header+2000px, start slightly before or right after.
                    // Let's try starting when the section's center hits the viewport center,
                    // assuming the pin duration (2000px) is long enough. Adjust if needed.
                    start: "center center",
                    // Or start relative to pin end: `start: () => `top top+=${getHeaderHeight() + 1900}px`,
                    end: "bottom bottom", // Let it finish naturally
                    toggleActions: "play none none reverse", // Play content timeline once
                    animation: contentRevealTimeline,
                    id: "services-content-reveal",
                    invalidateOnRefresh: true,
                    // markers: { startColor: "green", endColor: "red", indent: 50 } // Debug content trigger
                });

            } catch (error) {
                console.error("Error setting up services animation (SVG Path likely):", error);
                 // Fallback already handled in the initial check
            }
        }
        // --- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> ---
        // --- END OF REVISED Services Section Animation Sequence ---
        // --- >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> ---


        // --- Main Initialization Function ---
        function initAll() {
            console.log("Initializing LAYA animations...");
            initHeader();
            initNavigation(); // Must run AFTER header for height calc, BEFORE section triggers
            initFooter();
            initHero();
            initAbout();
            initServicesSequence(); // <<< CALL REVISED PINNING SEQUENCE
            initPortfolio();
            initContact();

            // --- Generic smooth scroll for other links ---
             document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                 if (!anchor.closest('.site-header') && !anchor.closest('.nav-dots')) {
                     anchor.addEventListener('click', function (e) {
                         const href = this.getAttribute('href');
                         if (href === '#portfolio-full') {
                             e.preventDefault();
                             console.log("Portfolio CTA clicked - Implement desired action.");
                             return;
                         }
                         if (href && href.startsWith('#') && href.length > 1) {
                             try {
                                 const target = document.querySelector(href);
                                 const offset = (href === '#section-0' ? 0 : getHeaderHeight()); // Check if scrolling to top
                                 if (target) {
                                     e.preventDefault();
                                     gsap.to(window, { duration: 1, scrollTo: { y: target, offsetY: offset }, ease: "power2.inOut" });
                                 } else { console.warn("Smooth scroll target not found:", href); }
                             } catch (error) { console.warn("Could not find target for anchor:", href, error); }
                         } else if (href === "#") { e.preventDefault(); }
                     });
                 }
             });

            // Final refresh after a slightly longer delay
            setTimeout(() => {
                ScrollTrigger.refresh();
                console.log("ScrollTrigger refreshed after init.");
            }, 300);

            // Refresh ScrollTrigger on resize (debounced)
            let resizeTimer;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(() => {
                   console.log("Resizing - Refreshing ScrollTrigger...");
                   ScrollTrigger.refresh(true); // Kill and recreate triggers on resize
                }, 250);
            });

            console.log("LAYA Initialization sequence complete.");
        }

        // Run initialization when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initAll);
        } else {
            initAll(); // DOM already loaded
        }
    </script>
</body>
</html>
