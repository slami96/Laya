<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LAYA Architecture Studio</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
      *, *::before, *::after {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      html {
          scroll-behavior: smooth;
      }
      body, html {
        margin: 0;
        padding: 0;
        font-family: 'Poppins', sans-serif;
        color: #333;
        overflow-x: hidden;
        background-color: #000; /* Base background */
      }
      body {
          overflow-y: auto;
      }
      /* --- BASE STYLES --- */
      :root {
          --header-height: 75px;
          --accent-color-1: #C0A080;
          --accent-color-2: #5A5A5A;
          --accent-color-3: #EAEAEA;
          --accent-color-4: #333333;
          --text-light: #f1f1f1;
          --text-dark: #2d2d2d;
          --bg-dark-1: #1a1a1a;
          --bg-dark-2: #252525;
          --bg-light-1: #fdfdfd;
          --bg-light-2: #ffffff;
          --header-icon-color-dark: var(--text-light);
          --header-icon-color-light: var(--text-dark);
          --header-hover-color: var(--accent-color-1);
          --header-bg-dark: rgba(26, 26, 26, 0.8);
          --header-bg-light: rgba(253, 253, 253, 0.85);
          --logo-font: 'Montserrat', sans-serif;
      }
      /* --- HEADER STYLES --- */
      .site-header {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          width: 100%;
          height: var(--header-height);
          padding: 0 40px;
          z-index: 100; /* Above intro animation */
          display: flex;
          align-items: center;
          background-color: var(--header-bg-dark);
          backdrop-filter: blur(12px);
          -webkit-backdrop-filter: blur(12px);
          transition: background-color 0.4s ease-out, backdrop-filter 0.4s ease-out;
      }
      body.on-light-section .site-header {
          background-color: var(--header-bg-light);
      }
      .header-logo {
          position: absolute;
          left: 50%;
          top: 50%;
          transform: translate(-50%, -50%);
      }
      .logo-link {
          text-decoration: none;
          display: inline-block;
      }
      .logo-link img {
          height: 50px;
          width: auto;
          display: block;
          transition: transform 0.3s ease;
      }
      .logo-link:hover img {
           transform: scale(1.08);
      }
      .header-nav {
          margin-left: auto;
      }
      .header-nav ul {
          list-style: none;
          display: flex;
          gap: 35px;
          padding: 0;
          margin: 0;
          align-items: center;
      }
      .header-nav li {
          position: relative;
      }
      .header-nav a {
          text-decoration: none;
          color: var(--header-icon-color-dark);
          font-size: 1.1rem;
          transition: transform 0.3s ease, color 0.3s ease;
          display: flex;
          flex-direction: column;
          align-items: center;
          position: relative;
      }
      body.on-light-section .header-nav a {
         color: var(--header-icon-color-light);
      }
      .header-nav a:hover {
          transform: scale(1.15);
          color: var(--header-hover-color);
      }
      .nav-label {
          position: absolute;
          top: 100%;
          margin-top: 6px;
          background-color: transparent;
          color: inherit;
          font-family: var(--logo-font);
          font-weight: 500;
          font-size: 0.75rem;
          padding: 2px 4px;
          border-radius: 4px;
          white-space: nowrap;
          opacity: 0;
          visibility: hidden;
          transform: translateY(5px) scale(0.9);
          transition: opacity 0.3s ease, transform 0.3s ease, visibility 0s 0.3s;
          pointer-events: none;
          text-shadow: 0 0 3px rgba(0, 0, 0, 0.5);
      }
      .header-nav a:hover .nav-label {
          opacity: 1;
          visibility: visible;
          transform: translateY(0) scale(1);
          transition: opacity 0.3s ease, transform 0.3s ease, visibility 0s 0s;
      }
      /* --- FOOTER STYLES --- */
      section#section-4 {
          position: relative;
          background-color: var(--bg-light-1);
          color: var(--text-dark);
          min-height: 100vh;
          height: auto;
          padding-bottom: 20vh; /* Increased bottom padding */
          display: flex;
          justify-content: center;
          align-items: center;
          overflow: hidden;
      }
      .site-footer {
          position: absolute;
          bottom: 30px;
          left: 0;
          width: 100%;
          padding: 0 30px;
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 15px;
          z-index: 5;
          opacity: 0; /* Initial state for GSAP */
          transform: translateY(30px); /* Initial state for GSAP */
      }
      .site-footer .copyright {
          font-size: 0.85rem;
          color: #888;
          text-align: center;
          font-family: 'Poppins', sans-serif;
      }
      .site-footer .social-icons {
          display: flex;
          justify-content: center;
          gap: 20px;
      }
      .site-footer .social-icons a {
          text-decoration: none;
          color: #aaa;
          font-size: 1.2rem;
          transition: transform 0.3s ease, color 0.3s ease;
          display: inline-block;
      }
      .site-footer .social-icons a:hover {
          transform: scale(1.15);
          color: var(--accent-color-2);
      }
      /* --- SECTION STYLES --- */
      section {
        min-height: 100vh;
        height: auto;
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        position: relative;
        overflow: hidden;
        padding: 50px;
        padding-top: var(--header-height); /* Add top padding matching header height */
        margin-top: calc(-1 * var(--header-height)); /* Negative margin to pull section under fixed header */
      }
      section:first-of-type { /* Hero has no top margin/padding */
        margin-top: 0;
        padding-top: 0;
      }

      /* --- SECTION 0: Hero Image Stack --- */
      .hero-section {
        background-color: var(--bg-dark-1);
        color: var(--text-light);
        display: block; /* Changed from flex for easier stacking context */
        padding: 0;
        min-height: 100vh;
        height: 100vh; /* Ensure it takes full viewport height */
        position: relative;
        overflow: hidden;
      }

      /* --- HERO CONTENT (Positioning Only) --- */
      .hero-content {
        position: absolute;
        top: 65%; /* << POSITION LOWER */
        left: 50%;
        transform: translate(-50%, -50%);
        z-index: 2; /* Ensure content is above scrim */
        text-align: center;
        width: 90%;
        max-width: 800px; /* << WIDER MAX WIDTH */
        opacity: 1; /* Make sure container is visible for layout */
        pointer-events: none; /* Allow clicks through to background if needed */
      }
       .hero-content > * {
           pointer-events: auto; /* Allow interaction with text if needed */
       }

      /* --- HERO TAGLINE STYLING --- */
      .hero-tagline {
        font-size: clamp(2.2rem, 5vw, 3.5rem); /* Slightly larger base size */
        font-weight: 600; /* Slightly bolder */
        margin: 0 auto;
        line-height: 1.4; /* Adjust line height */
        font-family: 'Montserrat', sans-serif; /* Match logo font maybe? */
        color: var(--text-light);
        text-shadow: 0 2px 6px rgba(0, 0, 0, 0.75); /* Adjusted shadow */
        overflow: hidden; /* Helps contain animating words */
      }

      /* --- TAGLINE WORD STYLES (for Pop Animation) --- */
      .tagline-word {
          display: inline-block; /* Needed for transform */
          opacity: 0; /* Initially hidden */
          transform: scale(0.5); /* Start scaled down */
          transform-origin: center center; /* Scale from center */
          margin: 0 4px; /* Space between words */
          will-change: transform, opacity; /* Performance hint */
      }

      .hero-image-stack {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          overflow: hidden;
      }

      /* --- SCRIM ADDED HERE --- */
      .hero-image-stack::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.3); /* Dark overlay */
        z-index: 1; /* Place scrim between image and content */
        pointer-events: none; /* Don't block interactions */
      }

      .hero-image {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          object-fit: cover;
          object-position: center;
          opacity: 0; /* Controlled by JS */
          pointer-events: none; /* Controlled by JS */
          z-index: 0; /* Ensure images are behind the scrim */
      }
      .hero-image.hero-image-active {
          opacity: 1;
          pointer-events: auto;
      }

      /* --- SECTION 1: About Me --- */
      .about-section {
        background-color: var(--bg-dark-2);
        color: var(--text-light);
      }
      .about-content-wrapper {
        max-width: 900px;
        opacity: 0; /* Initial state for GSAP */
        transform: translateY(50px); /* Initial state for GSAP */
        display: flex;
        justify-content: space-between;
        align-items: flex-start; /* Align items to the top */
        width: 100%;
      }
      .about-text-container {
        flex: 1; /* Take remaining space */
        margin-right: 40px; /* Space between text and image */
        text-align: left; /* Align text left */
      }
      .about-title {
          font-family: var(--logo-font);
          font-size: clamp(2rem, 5vw, 3.5rem);
          font-weight: 700;
          margin-bottom: 30px;
          color: var(--accent-color-1);
      }
      .about-text {
          max-width: 700px; /* Limit text width if needed */
      }
      .about-text p {
          font-size: clamp(0.9rem, 1.5vw, 1.1rem);
          line-height: 1.8;
          margin-bottom: 20px;
          font-weight: 300;
          font-family: 'Poppins', sans-serif;
      }
      .about-text strong {
          font-weight: 600;
          color: var(--accent-color-3);
      }
      .about-portrait {
          display: block;
          max-width: 350px; /* Control image size */
          width: 100%; /* Responsive width */
          height: auto;
          border-radius: 10px;
          border: 3px solid var(--accent-color-1);
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
          opacity: 0; /* Initial state for GSAP */
          transform: scale(0.8); /* Initial state for GSAP */
          flex-shrink: 0; /* Prevent image from shrinking */
      }

      /* --- SECTION: Services --- */
      .services-section {
          background-color: var(--bg-light-1);
          color: var(--text-dark);
          position: relative; /* Needed for z-index stacking */
          /* No overflow hidden here, allow fixed intro to show */
      }

      /* UPDATED: Intro Animation Container - Full Screen */
      .services-intro-animation {
          position: fixed; /* Cover the whole screen */
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          z-index: 90; /* Below header (100) & nav dots (101), above section content */
          opacity: 0; /* Initially hidden */
          pointer-events: none; /* Don't block interactions */
          background-color: var(--bg-light-1); /* Match section bg to hide content */
          overflow: hidden; /* Hide shapes drawing outside bounds */
      }
      .services-intro-animation svg {
         width: 100%;
         height: 100%;
         display: block;
         /* preserveAspectRatio: none; */ /* Option: Stretch shapes */
         preserveAspectRatio: xMidYMid meet; /* Option: Scale proportionally */
         position: absolute;
         top: 0; left: 0;
      }
      /* UPDATED: Intro Rect Styles */
      .intro-rect {
        stroke: var(--accent-color-4); /* Dark color for light background */
        stroke-width: 1.5; /* Thinner lines maybe */
        fill: none; /* Outline only */
        opacity: 0; /* Initially hidden - controlled by GSAP */
        transform-origin: center center; /* Scale/rotate from center */
        /* Initial transform set by GSAP */
      }
      /* END UPDATED */

      .services-container {
          max-width: 1100px;
          width: 100%;
          text-align: center;
          /* Initial state for GSAP - Content animates after intro */
          opacity: 0;
          transform: translateY(30px);
          position: relative; /* To ensure it's above the intro animation's potential remnants if z-index fails */
          z-index: 2; /* Above potential intro remnants */
      }
      .services-title {
          font-family: var(--logo-font);
          font-size: clamp(2rem, 5vw, 3.5rem);
          font-weight: 700;
          margin-bottom: 60px;
          color: var(--accent-color-4);
           /* Initial state for individual animation */
          opacity: 0;
          transform: translateY(20px);
      }
      .services-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: 40px;
          width: 100%;
      }
      .service-item {
          background-color: var(--bg-light-2);
          padding: 35px;
          border-radius: 8px;
          box-shadow: 0 6px 20px rgba(0, 0, 0, 0.07);
          text-align: center;
          /* Initial state for GSAP stagger animation */
          opacity: 0;
          transform: translateY(30px) scale(0.95);
          transition: transform 0.3s ease, box-shadow 0.3s ease; /* Keep hover transitions */
      }
      .service-item:hover {
          transform: translateY(-5px) scale(1.02); /* Adjust hover transform */
          box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }
      .service-icon {
          font-size: 2.8rem;
          color: var(--accent-color-1);
          margin-bottom: 25px;
          display: inline-block;
      }
      .service-item h3 {
          font-family: 'Montserrat', sans-serif;
          font-size: 1.4rem;
          font-weight: 700;
          margin-bottom: 15px;
          color: var(--accent-color-4);
      }
      .service-item p {
          font-family: 'Poppins', sans-serif;
          font-size: 0.95rem;
          line-height: 1.7;
          color: var(--accent-color-2);
          font-weight: 400;
      }

      /* --- SECTION 3: Portfolio Preview --- */
      .portfolio-section {
        background-color: var(--bg-dark-2);
        color: var(--text-light);
      }
      .portfolio-preview-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 100%;
        max-width: 1200px;
        opacity: 0; /* Initial state for GSAP */
        transform: translateY(50px); /* Initial state for GSAP */
      }
      .portfolio-title {
          font-family: var(--logo-font);
          font-size: clamp(2rem, 5vw, 3.5rem);
          font-weight: 700;
          margin-bottom: 50px;
          text-align: center;
          color: var(--accent-color-1);
      }
      .portfolio-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
          gap: 30px;
          width: 100%;
          margin-bottom: 50px;
      }
      .portfolio-item-placeholder {
          aspect-ratio: 4 / 3;
          background: linear-gradient(135deg, var(--accent-color-2), var(--accent-color-4));
          border-radius: 8px;
          display: flex;
          justify-content: center;
          align-items: center;
          color: var(--text-light);
          font-family: 'Montserrat', sans-serif;
          font-size: 1.1rem;
          font-weight: 700;
          box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
          opacity: 0; /* Initial state for GSAP */
          transform: scale(0.9); /* Initial state for GSAP */
          transition: transform 0.3s ease, box-shadow 0.3s ease;
          padding: 15px;
          text-align: center;
      }
      .portfolio-item-placeholder:hover {
          transform: scale(1.03);
          box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      }
      .portfolio-cta {
          display: inline-block;
          background-color: var(--accent-color-1);
          color: var(--text-dark);
          padding: 15px 40px;
          border-radius: 50px;
          font-family: 'Montserrat', sans-serif;
          font-weight: 700;
          text-decoration: none;
          font-size: 1rem;
          transition: background-color 0.3s ease, transform 0.3s ease, color 0.3s ease;
          opacity: 0; /* Initial state for GSAP */
          transform: translateY(20px); /* Initial state for GSAP */
      }
      .portfolio-cta:hover {
          background-color: var(--accent-color-3);
          color: var(--text-dark);
          transform: translateY(0px) scale(1.05); /* Keep hover transform */
      }

      /* --- SECTION 4: Contact Form --- */
      .contact-section {
          /* Combined with #section-4 styling above */
          color: var(--text-dark);
      }
      .contact-form-container {
         background-color: var(--bg-light-2);
         padding: 50px clamp(20px, 8vw, 80px); /* Responsive padding */
         border-radius: 10px;
         box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
         width: 100%;
         max-width: 700px;
         opacity: 0; /* Initial state for GSAP */
         transform: translateY(50px); /* Initial state for GSAP */
         z-index: 1; /* Ensure form is above footer initially */
         color: var(--text-dark); /* Explicitly set text color */
      }
      .contact-title {
          font-family: var(--logo-font);
          font-size: clamp(1.8rem, 4vw, 3rem);
          font-weight: 700;
          margin-bottom: 40px;
          text-align: center;
          color: var(--accent-color-4);
      }
      .contact-form .form-group {
          margin-bottom: 25px;
          position: relative;
      }
      .contact-form label {
          display: block;
          font-family: 'Poppins', sans-serif;
          font-weight: 600;
          font-size: 0.9rem;
          color: var(--accent-color-2);
          margin-bottom: 8px;
          opacity: 0; /* Initial state for GSAP */
          transform: translateX(-20px); /* Initial state for GSAP */
      }
      .contact-form input[type="text"],
      .contact-form input[type="email"],
      .contact-form textarea {
          width: 100%;
          padding: 15px 20px;
          border: 1px solid #ccc;
          border-radius: 6px;
          font-family: 'Poppins', sans-serif;
          font-size: 1rem;
          font-weight: 400;
          color: var(--text-dark);
          background-color: var(--bg-light-2); /* Ensure background matches */
          transition: border-color 0.3s ease, box-shadow 0.3s ease;
          opacity: 0; /* Initial state for GSAP */
          transform: translateX(-20px); /* Initial state for GSAP */
      }
      .contact-form input[type="text"]:focus,
      .contact-form input[type="email"]:focus,
      .contact-form textarea:focus {
          border-color: var(--accent-color-1);
          box-shadow: 0 0 0 3px rgba(192, 160, 128, 0.3);
          outline: none;
      }
      .contact-form textarea {
          min-height: 150px;
          resize: vertical;
      }
      .contact-form button {
          display: block;
          width: 100%;
          padding: 15px 30px;
          background-color: var(--accent-color-4);
          color: var(--text-light);
          border: none;
          border-radius: 50px;
          font-family: 'Montserrat', sans-serif;
          font-size: 1.1rem;
          font-weight: 700;
          cursor: pointer;
          transition: background-color 0.3s ease, transform 0.3s ease, color 0.3s ease;
          margin-top: 10px;
          opacity: 0; /* Initial state for GSAP */
          transform: translateY(20px); /* Initial state for GSAP */
      }
      .contact-form button:hover {
          background-color: var(--accent-color-1);
          color: var(--text-dark);
          transform: scale(1.03) translateY(0); /* Adjust hover transform */
      }

      /* --- Navigation Dots --- */
      .nav-dots {
        position: fixed;
        top: 50%;
        right: 30px;
        transform: translateY(-50%);
        display: flex;
        flex-direction: column;
        z-index: 101; /* Above header and intro */
      }
      .nav-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background-color: rgba(255, 255, 255, 0.3); /* Base color for dark */
        margin: 12px 0;
        cursor: pointer;
        transition: background-color 0.3s, transform 0.3s;
        border: 1px solid rgba(0, 0, 0, 0.2); /* Subtle border */
      }
      body.on-light-section .nav-dot {
         background-color: rgba(0, 0, 0, 0.2); /* Base color for light */
         border: 1px solid rgba(255, 255, 255, 0.2); /* Subtle border */
      }
      .nav-dot.active {
        background-color: white; /* Active color for dark */
        transform: scale(1.4);
        border: 1px solid rgba(0, 0, 0, 0.3);
      }
       body.on-light-section .nav-dot.active {
         background-color: var(--text-dark); /* Active color for light */
         border: 1px solid rgba(255, 255, 255, 0.3);
       }

      /* --- Scroll Indicator (First Section) --- */
      .scroll-indicator {
        position: absolute;
        bottom: 10vh; /* Positioned higher */
        left: 50%;
        transform: translateX(-50%);
        color: rgba(255, 255, 255, 0.7);
        font-size: 0.8rem;
        font-family: 'Poppins', sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        z-index: 5;
        opacity: 0.8;
        transition: opacity 0.5s ease;
        letter-spacing: 1px;
        background-color: transparent; /* Ensure no bg interferes */
      }
       .scroll-indicator span {
        font-weight: 400;
       }
       .scroll-indicator i {
         font-size: 1.2rem;
         margin-top: 8px;
         color: #fff; /* Ensure arrow is white */
       }

      @keyframes scrollArrow {
        0% { transform: translateY(0); opacity: 0.3; }
        50% { transform: translateY(8px); opacity: 1; }
        100% { transform: translateY(0); opacity: 0.3; }
      }

      .scroll-indicator i {
         animation: scrollArrow 2s infinite cubic-bezier(0.68, -0.55, 0.27, 1.55);
      }

      body.scrolled .scroll-indicator {
         opacity: 0;
         pointer-events: none;
      }


      /* --- RESPONSIVE STYLES --- */
       @media (max-width: 992px) {
           .site-header { padding: 0 25px; }
           .logo-link img { height: 45px; }
           .header-nav ul { gap: 25px; }
           section { padding-left: 30px; padding-right: 30px; }
           section:first-of-type { padding-left: 0; padding-right: 0; padding-top: 0;}
           .portfolio-grid { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
           .contact-form-container { padding: 40px clamp(15px, 6vw, 60px); }
           .services-grid { gap: 30px; }
           .about-content-wrapper { flex-direction: column-reverse; align-items: center; }
           .about-text-container { margin-right: 0; margin-top: 30px; text-align: center; }
           .about-portrait { max-width: 250px; margin-bottom: 20px; }
           .scroll-indicator { bottom: 8vh; }
           .hero-content { top: 68%; max-width: 90%;} /* Adjust hero position/width */
           .hero-tagline { font-size: clamp(1.8rem, 4vw, 3rem); } /* Adjusted responsive hero font */
           /* Adjust intro rect stroke width for smaller screens if needed */
           .intro-rect { stroke-width: 1.2; }
       }

        @media (max-width: 768px) {
            :root { --header-height: 70px; }
            .site-header { padding: 0 20px; }
            .logo-link img { height: 40px; }
            .header-nav ul { gap: 20px; }
            .header-nav a { font-size: 1rem; }
            .nav-label { display: none; } /* Hide labels on smaller screens */
            .nav-dots { right: 20px; }
            .nav-dot { width: 9px; height: 9px; margin: 10px 0; }
            section { padding-left: 20px; padding-right: 20px; }
             section:first-of-type { padding-left: 0; padding-right: 0; padding-top: 0;}
            .portfolio-grid { gap: 20px; }
            .portfolio-item-placeholder { font-size: 1rem; }
            .contact-form-container { padding: 30px clamp(10px, 4vw, 40px); }
            .contact-title { font-size: clamp(1.6rem, 5vw, 2.5rem); margin-bottom: 30px; }
            .contact-form input, .contact-form textarea { padding: 12px 15px; font-size: 0.95rem;}
            .contact-form button { padding: 12px 25px; font-size: 1rem; }
            .site-footer { bottom: 20px; }
            .site-footer .copyright { font-size: 0.75rem; }
            .site-footer .social-icons { gap: 15px; }
            .site-footer .social-icons a { font-size: 1.1rem; }
            .about-portrait { max-width: 200px; }
            .services-grid { grid-template-columns: 1fr; gap: 25px; } /* Stack services */
            .services-title { margin-bottom: 40px; }
            .service-item { padding: 30px; }
            .hero-content { top: 70%; max-width: 90%; } /* Adjust hero position/width */
            .hero-tagline { font-size: clamp(1.6rem, 5vw, 2.5rem); line-height: 1.4; } /* Adjust tagline font */
            .intro-rect { stroke-width: 1; } /* Thinner lines on mobile */
       }

        @media (max-width: 480px) {
            :root { --header-height: 65px; }
            .site-header { padding: 0 15px; }
            .logo-link img { height: 35px; }
            .header-nav ul { gap: 15px; }
            .header-nav a { font-size: 0.9rem; }
            .nav-dots { right: 15px; }
            .hero-tagline { font-size: clamp(1.4rem, 6vw, 2rem); line-height: 1.4; } /* Adjust tagline font */
            .about-title { font-size: clamp(1.8rem, 6vw, 2.8rem); }
            .about-text p { font-size: clamp(0.85rem, 3.5vw, 1rem); line-height: 1.7; }
            .about-portrait { max-width: 150px; }
            .services-title { font-size: clamp(1.8rem, 6vw, 2.8rem); }
            .portfolio-title { font-size: clamp(1.8rem, 6vw, 2.8rem); }
            .portfolio-grid { grid-template-columns: 1fr; gap: 15px; }
            .portfolio-item-placeholder { font-size: 0.9rem; }
            .contact-title { font-size: clamp(1.5rem, 6vw, 2.2rem); }
            .scroll-indicator { bottom: 6vh; font-size: 0.75rem;}
            section { padding-left: 15px; padding-right: 15px; }
            section:first-of-type { padding-left: 0; padding-right: 0; padding-top: 0;}
            .contact-form-container { padding: 25px 15px; }
            .hero-content { top: 72%; max-width: 95%; } /* Adjust hero position/width */
            .tagline-word { margin: 0 2px;} /* Reduce space slightly */
        }
    </style>
</head>
<body data-current-theme="dark">
    <header class="site-header" id="site-header">
        <div class="header-logo">
            <a href="#section-0" class="logo-link" aria-label="LAYA Home">
                <img src="logo.png" alt="LAYA Architecture Studio Logo">
            </a>
        </div>
        <nav class="header-nav">
            <ul>
                <li><a href="#section-0" aria-label="Home"><i class="fas fa-home"></i><span class="nav-label">Home</span></a></li>
                <li><a href="#section-1" aria-label="About"><i class="fas fa-info-circle"></i><span class="nav-label">About</span></a></li>
                <li><a href="#section-services" aria-label="Services"><i class="fas fa-concierge-bell"></i><span class="nav-label">Services</span></a></li>
                <li><a href="#section-3" aria-label="Portfolio"><i class="fas fa-drafting-compass"></i><span class="nav-label">Portfolio</span></a></li>
                <li><a href="#section-4" aria-label="Contact"><i class="fas fa-envelope"></i><span class="nav-label">Contact</span></a></li>
            </ul>
        </nav>
    </header>

    <div class="nav-dots">
        <div class="nav-dot active" data-section="0"></div>
        <div class="nav-dot" data-section="1"></div>
        <div class="nav-dot" data-section="services"></div> <div class="nav-dot" data-section="3"></div>
        <div class="nav-dot" data-section="4"></div>
    </div>

    <section class="hero-section" id="section-0" data-theme="dark">
        <div class="hero-image-stack">
             <img src="interior_1.png" alt="Modern Interior Design 1" class="hero-image hero-image-active" id="hero-img-1">
            <img src="interior_2.png" alt="Classic Interior Design 2" class="hero-image" id="hero-img-2">
            <img src="interior_3.png" alt="Innovative Interior Design 3" class="hero-image" id="hero-img-3">
        </div>
         <div class="hero-content">
              <p class="hero-tagline">
                  <span class="tagline-word">Design</span>
                  <span class="tagline-word">that</span>
                  <span class="tagline-word">inspires</span>
              </p>
         </div>
        <div class="scroll-indicator">
             <span>Explore</span>
            <i class="fas fa-chevron-down"></i>
        </div>
    </section>

    <section class="about-section" id="section-1" data-theme="dark">
        <div class="about-content-wrapper">
            <div class="about-text-container">
                <h2 class="about-title">Our Philosophy</h2>
                <div class="about-text">
                    <p>At LAYA, we believe architecture is more than just buildings; it's about crafting experiences and shaping environments. Our approach is rooted in a deep respect for <strong>tradition and context</strong>, while constantly pushing the boundaries of <strong>design innovation</strong>.</p>
                    <p>We work closely with our clients, understanding their vision and needs to create spaces that are not only aesthetically stunning but also functional, sustainable, and enduring. From initial concept to final construction, <strong>collaboration and meticulous attention to detail</strong> are at the heart of everything we do.</p>
                    <p>Let us help you bring your vision to life.</p>
                </div>
            </div>
             <img src="portrait.jpg" alt="Architect Portrait LAYA Studio" class="about-portrait">
        </div>
    </section>

    <section class="services-section" id="section-services" data-theme="light">
        <div class="services-intro-animation">
            <svg viewBox="0 0 100 100" preserveAspectRatio="xMidYMid meet">
                <rect class="intro-rect" x="10" y="10" width="30" height="20" />
                <rect class="intro-rect" x="60" y="25" width="25" height="40" />
                <rect class="intro-rect" x="20" y="55" width="50" height="15" />
                <rect class="intro-rect" x="75" y="70" width="15" height="20" />
                <rect class="intro-rect" x="5" y="40" width="10" height="30" />
                <rect class="intro-rect" x="45" y="5" width="20" height="25" />
                 <rect class="intro-rect" x="30" y="75" width="35" height="10" />
                 <rect class="intro-rect" x="85" y="5" width="10" height="50" />
            </svg>
        </div>
        <div class="services-container">
            <h2 class="services-title">What We Offer</h2>
            <div class="services-grid">
                <div class="service-item">
                    <i class="fas fa-pencil-ruler service-icon"></i>
                    <h3>Architectural Design</h3>
                    <p>Creating bespoke blueprints for residential, commercial, and public spaces that balance form and function.</p>
                </div>
                <div class="service-item">
                    <i class="fas fa-couch service-icon"></i>
                    <h3>Interior Spaces</h3>
                    <p>Designing thoughtful and elegant interiors that reflect your style and enhance daily living or working.</p>
                </div>
                <div class="service-item">
                    <i class="fas fa-lightbulb service-icon"></i>
                    <h3>Project Visioning</h3>
                    <p>Collaborating from the earliest stages to define project goals, feasibility, and conceptual direction.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="portfolio-section" id="section-3" data-theme="dark">
        <div class="portfolio-preview-container">
            <h2 class="portfolio-title">Featured Work</h2>
            <div class="portfolio-grid">
                <div class="portfolio-item-placeholder">Project Alpha</div>
                <div class="portfolio-item-placeholder">Villa Beta</div>
                <div class="portfolio-item-placeholder">Urban Complex Gamma</div>
                <div class="portfolio-item-placeholder">Cultural Center Delta</div>
                <div class="portfolio-item-placeholder">Residence Epsilon</div>
                <div class="portfolio-item-placeholder">Commercial Hub Zeta</div>
            </div>
            <a href="#portfolio-full" class="portfolio-cta">Explore Full Portfolio</a>
            </div>
    </section>

    <section class="contact-section" id="section-4" data-theme="light">
         <div class="contact-form-container">
             <h2 class="contact-title">Get In Touch</h2>
             <form class="contact-form" action="#" method="POST">
                 <div class="form-group">
                     <label for="name">Name</label>
                     <input type="text" id="name" name="name" required placeholder="Your Full Name">
                 </div>
                 <div class="form-group">
                     <label for="email">Email</label>
                     <input type="email" id="email" name="email" required placeholder="your.email@example.com">
                 </div>
                 <div class="form-group">
                     <label for="subject">Subject</label>
                     <input type="text" id="subject" name="subject" placeholder="Briefly, what's this about?">
                 </div>
                 <div class="form-group">
                     <label for="message">Message</label>
                     <textarea id="message" name="message" required placeholder="Tell us more about your project or inquiry..."></textarea>
                 </div>
                 <button type="submit">Send Message</button>
             </form>
         </div>
        <footer class="site-footer">
            <div class="social-icons">
                <a href="#" aria-label="Instagram" title="Instagram"><i class="fab fa-instagram"></i></a>
                <a href="#" aria-label="LinkedIn" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                <a href="#" aria-label="Pinterest" title="Pinterest"><i class="fab fa-pinterest"></i></a>
                <a href="#" aria-label="Behance" title="Behance"><i class="fab fa-behance"></i></a>
            </div>
            <p class="copyright">&copy; <span id="copyright-year"></span> LAYA Architecture Studio. All rights reserved.</p>
        </footer>
    </section>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollToPlugin.min.js"></script>
    <script>
      gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);

        function initHero() {
            // ... (Hero initialization code remains the same) ...
            const heroSection = document.querySelector('.hero-section');
            if (!heroSection) return;
            const images = gsap.utils.toArray('.hero-image');
            const content = document.querySelector('.hero-content'); // Container (for positioning)
            const words = gsap.utils.toArray('.tagline-word', content); // Select the words

            let currentImageIndex = 0;
            let imageInterval;
            if (images.length === 0) { console.warn("No hero images found."); return; }

            gsap.set(images[0], { opacity: 1, pointerEvents: 'auto' });
            gsap.set(images.slice(1), { opacity: 0, pointerEvents: 'none' });
            gsap.set(content, { opacity: 1 });

            const wordTl = gsap.timeline({
                scrollTrigger: { trigger: heroSection, start: "top 65%", toggleActions: "play none none reverse" },
                delay: 0.1
            });

            if (words.length > 0) {
                wordTl.to(words, { opacity: 1, scale: 1, duration: 0.7, ease: 'back.out(1.5)', stagger: 0.1 });
            } else { console.warn("No tagline words found for animation."); }

            function switchImage() {
                if (images.length <= 1) return;
                const nextImageIndex = (currentImageIndex + 1) % images.length;
                const tl = gsap.timeline({ defaults: { ease: "power1.inOut" } });
                tl.to(images[currentImageIndex], { opacity: 0, duration: 1.5 })
                  .set(images[currentImageIndex], { pointerEvents: 'none' })
                  .set(images[nextImageIndex], { opacity: 0 }, "<")
                  .to(images[nextImageIndex], { opacity: 1, duration: 1.5 }, "<0.3")
                  .set(images[nextImageIndex], { pointerEvents: 'auto' });
                currentImageIndex = nextImageIndex;
            }
            function startImageTimer() {
                clearInterval(imageInterval);
                if (images.length > 1) { imageInterval = setInterval(switchImage, 5000); }
            }
            startImageTimer();

            images.forEach(img => {
                gsap.to(img, { y: -30, ease: "none", scrollTrigger: { trigger: heroSection, start: "top top", end: "bottom top", scrub: 1.5 } });
            });
            gsap.to(content, { yPercent: -15, ease: "none", scrollTrigger: { trigger: heroSection, start: "top top", end: "bottom top", scrub: 1 } });
        }

        function initAbout() {
           // ... (About initialization code remains the same) ...
           const aboutSection = document.querySelector('.about-section');
           const aboutContentWrapper = document.querySelector('.about-content-wrapper');
           const aboutPortrait = document.querySelector('.about-portrait');
           if (!aboutSection || !aboutContentWrapper || !aboutPortrait) { console.warn("About elements missing."); return; }
           const tl = gsap.timeline({ scrollTrigger: { trigger: aboutSection, start: "top 70%", toggleActions: "play none none reverse" } });
           tl.to(aboutContentWrapper, { opacity: 1, y: 0, duration: 1, ease: 'power3.out' })
             .to(aboutPortrait, { opacity: 1, scale: 1, duration: 0.8, ease: 'back.out(1.7)' }, "-=0.6");
        }

        // --- UPDATED initServices Function ---
        function initServices() {
            const servicesSection = document.querySelector('.services-section');
            const introAnimationContainer = servicesSection.querySelector('.services-intro-animation');
            const introRects = gsap.utils.toArray('.intro-rect', introAnimationContainer);
            const container = servicesSection.querySelector('.services-container');
            const title = servicesSection.querySelector('.services-title');
            const items = gsap.utils.toArray('.service-item', container);

            if (!servicesSection || !introAnimationContainer || !container || !title || items.length === 0 || introRects.length === 0) {
                console.warn("Services section elements missing for full animation. Check intro SVG, container, title, items.");
                // Fallback: Ensure content is visible if intro fails
                gsap.set(container, { opacity: 1, y: 0 });
                 gsap.set(title, { opacity: 1, y: 0 });
                 gsap.set(items, { opacity: 1, y: 0, scale: 1 });
                // Optionally, just animate the container simply
                // if(container) {
                //     gsap.to(container, {
                //         opacity: 1, y: 0, duration: 0.8, ease: 'power2.out',
                //         scrollTrigger: { trigger: servicesSection, start: "top 75%", toggleActions: "play none none reverse" }
                //     });
                // }
                return;
            }

            // --- Initial States ---
            gsap.set(introAnimationContainer, { opacity: 0, pointerEvents: 'none' }); // Start hidden and non-interactive
            // Set initial random transforms for each rectangle
            introRects.forEach(rect => {
                gsap.set(rect, {
                    opacity: 0,
                    scale: gsap.utils.random(0.1, 0.5), // Start small
                    rotation: gsap.utils.random(-60, 60),
                    x: gsap.utils.random(-50, 50), // Random offset from original SVG position
                    y: gsap.utils.random(-50, 50),
                    transformOrigin: "center center"
                });
            });
            gsap.set(container, { opacity: 0, y: 30 });
            gsap.set(title, { opacity: 0, y: 20 });
            gsap.set(items, { opacity: 0, y: 30, scale: 0.95 });

            // --- Animation Timeline ---
            const tl = gsap.timeline({
                scrollTrigger: {
                    trigger: servicesSection,
                    start: "top 70%", // Adjust trigger point as needed
                    toggleActions: "play none none reverse", // Play on enter, reverse on scroll back up
                    // markers: true, // For debugging
                    onEnter: () => gsap.set(introAnimationContainer, { pointerEvents: 'auto' }), // Enable pointer events only when active
                    onLeave: () => gsap.set(introAnimationContainer, { pointerEvents: 'none' }),
                    onEnterBack: () => gsap.set(introAnimationContainer, { pointerEvents: 'auto' }),
                    onLeaveBack: () => gsap.set(introAnimationContainer, { pointerEvents: 'none' })
                }
            });

            // 1. Fade in the Full Screen Intro Container
            tl.to(introAnimationContainer, {
                opacity: 1,
                duration: 0.2, // Quick fade-in for the background
                ease: 'power1.inOut'
            });

            // 2. Animate Rectangles (Longer Sequence >= 2 seconds)
            // Animate ALL rects simultaneously with variations
            tl.to(introRects, {
                opacity: gsap.utils.random(0.5, 0.9, 0.1), // Random final opacity (slightly transparent)
                scale: gsap.utils.random(0.8, 1.8, 0.1),   // Random final scale
                rotation: gsap.utils.random(-180, 180, 5), // Random final rotation
                x: 0, // Move back towards original position
                y: 0,
                duration: 1.5, // Longer duration for the main animation
                stagger: {
                    each: 0.05, // Slight stagger between rects starting
                    from: "random" // Start from random rects
                },
                ease: 'power2.inOut'
            }, "-=0.1"); // Start slightly after container fades in

            // Add another short animation phase for more dynamism within the 2s+ window
            tl.to(introRects, {
                opacity: 0, // Fade out
                scale: gsap.utils.random(0.2, 0.7), // Scale down again
                rotation: "+=" + gsap.utils.random(-90, 90), // Add more rotation
                duration: 0.8, // Duration for fade out phase
                stagger: {
                    each: 0.04,
                    from: "random"
                },
                ease: 'power1.in'
            }, "-=0.5"); // Overlap with the end of the previous phase

            // 3. Fade Out the Full Screen Intro Container
            // Ensure this starts AFTER the rectangle animations have had time (~2 seconds total)
            tl.to(introAnimationContainer, {
                opacity: 0,
                duration: 0.5, // Fade out duration
                ease: 'power1.inOut'
            }, ">-0.2"); // Start slightly before the last rect animation ends

            // 4. Animate the Main Content In (After Intro Fades Out)
             tl.to(container, { opacity: 1, y: 0, duration: 0.01 }, "-=0.3") // Make container 'visible' during intro fade out
              .to(title, {
                  opacity: 1,
                  y: 0,
                  duration: 0.6,
                  ease: 'power2.out'
              }, "-=0.1") // Start title slightly overlapping intro fade out
              .to(items, {
                  opacity: 1,
                  y: 0,
                  scale: 1,
                  duration: 0.5,
                  ease: 'power2.out',
                  stagger: 0.15 // Service items cascade in
              }, "-=0.4"); // Start items animation shortly after title starts
        }
        // --- END UPDATED initServices Function ---

        function initPortfolio() {
            // ... (Portfolio initialization code remains the same) ...
            const portfolioSection = document.querySelector('.portfolio-section');
            const container = document.querySelector('.portfolio-preview-container');
            if (!portfolioSection || !container) { console.warn("Portfolio elements missing."); return; }
            const items = gsap.utils.toArray('.portfolio-item-placeholder', container);
            const cta = document.querySelector('.portfolio-cta', container);
            if (!items.length || !cta) { console.warn("Portfolio items/CTA missing."); return; }
            const tl = gsap.timeline({ scrollTrigger: { trigger: portfolioSection, start: "top 65%", toggleActions: "play none none reverse" } });
            tl.to(container, { opacity: 1, y: 0, duration: 0.5, ease: 'power2.out' })
              .to(items, { opacity: 1, scale: 1, duration: 0.6, ease: 'back.out(1.4)', stagger: 0.15 }, "-=0.3")
              .to(cta, { opacity: 1, y: 0, duration: 0.7, ease: 'power2.out' }, "-=0.5");
        }

        function initContact() {
            // ... (Contact initialization code remains the same) ...
            const contactSection = document.querySelector('.contact-section');
            const container = document.querySelector('.contact-form-container');
            if (!contactSection || !container) { console.warn("Contact elements missing."); return; }
            const labels = gsap.utils.toArray('.contact-form label', container);
            const inputs = gsap.utils.toArray('.contact-form input, .contact-form textarea', container);
            const button = container.querySelector('.contact-form button');
            if (!labels.length || !inputs.length || !button) { console.warn("Contact form elements missing."); return; }
            const tl = gsap.timeline({ scrollTrigger: { trigger: contactSection, start: "top 60%", toggleActions: "play none none reverse" } });
            tl.to(container, { opacity: 1, y: 0, duration: 0.8, ease: 'power3.out' });
            tl.to(labels, { opacity: 1, x: 0, duration: 0.5, ease: 'power2.out', stagger: 0.1 }, "-=0.5");
            tl.to(inputs, { opacity: 1, x: 0, duration: 0.5, ease: 'power2.out', stagger: 0.1 }, "<0.1");
            tl.to(button, { opacity: 1, y: 0, duration: 0.6, ease: 'back.out(1.7)' }, "-=0.3");
        }

        function initHeader() {
           // ... (Header initialization code remains the same) ...
           const header = document.getElementById('site-header');
           if (!header) { console.warn("Site header not found."); return; }
           const headerLinks = document.querySelectorAll('.header-nav a[href^="#"]');
           headerLinks.forEach(anchor => {
               anchor.addEventListener('click', function(e) {
                   const href = this.getAttribute('href');
                   if (href && href.startsWith('#') && href.length > 1) {
                       try {
                           const target = document.querySelector(href);
                           if (target) {
                               e.preventDefault();
                               const headerHeight = header.offsetHeight;
                               const offset = (target.id === 'section-0' ? 0 : headerHeight);
                               gsap.to(window, { duration: 1.2, scrollTo: { y: target, offsetY: offset }, ease: "power2.inOut" });
                           } else { console.warn(`Scroll target '${href}' not found.`); }
                       } catch (error) { console.error(`Error selecting scroll target '${href}':`, error); }
                   }
               });
           });
           const logoLink = document.querySelector('.logo-link');
           if (logoLink) {
             logoLink.addEventListener('click', function(e) {
                 const href = this.getAttribute('href');
                  if (href === '#section-0') {
                      e.preventDefault();
                       const target = document.getElementById('section-0');
                       if(target){ gsap.to(window, { duration: 1.2, scrollTo: { y: target }, ease: "power2.inOut" }); }
                  }
             });
           }
        }

        function initFooter() {
            // ... (Footer initialization code remains the same) ...
            const footer = document.querySelector('#section-4 .site-footer');
            const copyrightYearSpan = document.getElementById('copyright-year');
            if (!footer) { console.warn("Site footer missing."); return; }
            if(copyrightYearSpan) { copyrightYearSpan.textContent = new Date().getFullYear(); } else { console.warn("Copyright year span missing."); }
            gsap.to(footer, { opacity: 1, y: 0, duration: 1.0, ease: 'power2.out', scrollTrigger: { trigger: '#section-4', start: "center bottom-=10%", toggleActions: "play none none reverse", id: "footer-reveal" } });
        }

        function initNavigation() {
            // ... (Navigation initialization code remains the same) ...
             const sectionsNodeList = document.querySelectorAll('section[id^="section-"]');
            const sections = Array.from(sectionsNodeList);
            const navDots = document.querySelectorAll('.nav-dot');
            const body = document.body;
            const header = document.getElementById('site-header');
            if (navDots.length === 0 || sections.length === 0 || !header) { console.warn("Navigation elements missing. Skipping nav dot logic."); return; }
            if (navDots.length !== sections.length) { console.warn(`Dot/Section mismatch: Found ${navDots.length} dots and ${sections.length} sections. Ensure 'data-section' attributes on dots match section ID suffixes (e.g., data-section="services" for id="section-services").`); }
            const getHeaderHeight = () => header.offsetHeight;
            navDots.forEach(dot => {
                dot.addEventListener('click', (e) => {
                    e.preventDefault();
                    const sectionIdSuffix = dot.getAttribute('data-section');
                    const targetSection = document.getElementById(`section-${sectionIdSuffix}`);
                    if (targetSection) {
                        const offset = (targetSection.id === 'section-0' ? 0 : getHeaderHeight());
                        gsap.to(window, { duration: 1.2, scrollTo: { y: targetSection, offsetY: offset }, ease: "power2.inOut" });
                    } else { console.error(`Target section #section-${sectionIdSuffix} not found for dot click.`); }
                });
            });
             sections.forEach((section) => {
                 const sectionIdSuffix = section.id.replace('section-', '');
                 const theme = section.getAttribute('data-theme') || 'dark';
                 ScrollTrigger.create({
                     trigger: section,
                     start: () => section.id === 'section-0' ? `top top` : `top top+=${getHeaderHeight()}px`,
                     end: () => `bottom top+=${getHeaderHeight() + 1}px`,
                     id: `section-nav-${sectionIdSuffix}`,
                     onEnter: () => updateActiveState(sectionIdSuffix, theme),
                     onEnterBack: () => updateActiveState(sectionIdSuffix, theme),
                     onLeave: (self) => { if (section.id === `section-${navDots[navDots.length - 1].getAttribute('data-section')}` && self.direction === -1) { const prevSuffix = navDots[navDots.length - 2].getAttribute('data-section'); const prevSection = document.getElementById(`section-${prevSuffix}`); if(prevSection) updateActiveState(prevSuffix, prevSection.getAttribute('data-theme') || 'dark'); } },
                     onLeaveBack: (self) => { if (section.id === 'section-0' && self.direction === 1) { const nextSuffix = navDots[1].getAttribute('data-section'); const nextSection = document.getElementById(`section-${nextSuffix}`); if(nextSection) updateActiveState(nextSuffix, nextSection.getAttribute('data-theme') || 'dark'); } },
                     invalidateOnRefresh: true
                 });
             });
            function updateActiveState(activeSectionIdSuffix, activeTheme) {
                navDots.forEach((dot) => { dot.classList.toggle('active', dot.getAttribute('data-section') === activeSectionIdSuffix); });
                body.classList.toggle('on-light-section', activeTheme === 'light');
            }
             let scrollIndicatorState = { scrolled: window.scrollY > 50 };
             body.classList.toggle('scrolled', scrollIndicatorState.scrolled);
             const scrollListener = () => { const isScrolled = window.scrollY > 50; if (isScrolled !== scrollIndicatorState.scrolled) { body.classList.toggle('scrolled', isScrolled); scrollIndicatorState.scrolled = isScrolled; } };
             window.addEventListener('scroll', scrollListener, { passive: true });
              setTimeout(() => {
                  ScrollTrigger.refresh();
                  let initialSectionIdSuffix = '0'; let initialTheme = 'dark'; const scrollY = window.scrollY; const triggerPoint = getHeaderHeight() / 2;
                  for (let i = sections.length - 1; i >= 0; i--) { const section = sections[i]; const rect = section.getBoundingClientRect(); const sectionTopDoc = scrollY + rect.top; if (sectionTopDoc <= scrollY + triggerPoint) { initialSectionIdSuffix = section.id.replace('section-', ''); initialTheme = section.getAttribute('data-theme') || 'dark'; break; } }
                  updateActiveState(initialSectionIdSuffix, initialTheme); scrollIndicatorState.scrolled = window.scrollY > 50; body.classList.toggle('scrolled', scrollIndicatorState.scrolled);
                  console.log(`Initial section detected: ${initialSectionIdSuffix}, theme: ${initialTheme}`);
              }, 200);
        }

        function initAll() {
         console.log("Initializing LAYA animations...");
         initHeader();
         initNavigation();
         initFooter();
         initHero();
         initAbout();
         initServices(); // Our UPDATED function
         initPortfolio();
         initContact();

         // Generic smooth scroll for other anchors
         document.querySelectorAll('a[href^="#"]').forEach(anchor => {
             if (!anchor.closest('.site-header') && !anchor.closest('.nav-dots')) {
               anchor.addEventListener('click', function(e) {
                 const href = this.getAttribute('href');
                 if (href === '#portfolio-full') { e.preventDefault(); console.log("Portfolio CTA clicked - Implement navigation."); return; }
                 if (href && href.startsWith('#') && href.length > 1) {
                   try {
                     const target = document.querySelector(href);
                     const header = document.getElementById('site-header');
                     const offset = header ? header.offsetHeight : 75;
                     if (target) { e.preventDefault(); gsap.to(window, { duration: 1, scrollTo: { y: target, offsetY: offset }, ease: "power2.inOut" }); }
                     else { console.warn("Smooth scroll target not found:", href); }
                   } catch (error) { console.warn("Could not find target for anchor:", href, error); }
                 } else if (href === "#") { e.preventDefault(); }
               });
             }
         });

         // Final refresh
         setTimeout(() => { ScrollTrigger.refresh(); console.log("ScrollTrigger refreshed after all init."); }, 300);

         // Refresh ScrollTrigger on resize
         let resizeTimer;
         window.addEventListener('resize', () => { clearTimeout(resizeTimer); resizeTimer = setTimeout(() => { console.log("Resizing - Refreshing ScrollTrigger..."); ScrollTrigger.refresh(true); }, 250); });

         console.log("LAYA Initialization sequence complete.");
        }

        // Run initialization when DOM is ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initAll);
        } else {
            initAll();
        }
    </script>
</body>
</html>
